#### American Civil War Decisions by Herkles ####

ACW_foreign_volunteer_decisions = {# Foreign Volunteers
	ACW_support_csa_dec = {# Support the CSA
		icon = ger_military_buildup
		allowed = {
			NOT = {
				tag = USA
				tag = CSA
				tag = PSA
				tag = TEX
				tag = NEE
				tag = BRA #has unique event bra.108
			}
		}
		visible = {
			country_exists = CSA
			arms_factory > 4
			has_socialist_government = yes
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			NOT = {
				has_war_with = CSA
				has_country_flag = ACW_supported_CSA
				has_country_flag = ACW_supported_USA
				has_country_flag = ACW_supported_TEX
				has_country_flag = ACW_supported_PSA
			}
		}
		fire_only_once = yes
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 1999 }
		}
		custom_cost_text = 2000_infantry_equipment_1
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_equipment = { infantry_equipment < 4000 }
			}
			modifier = {
				factor = 0
				has_war = yes
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_support_csa_dec"
			set_country_flag = ACW_supported_CSA
			army_experience = 5
			send_equipment = { target = CSA type = infantry_equipment amount = 2000 }
			CSA = {
				country_event = amcivwar.611
			}
		}
	}

	ACW_support_usa_dec = {# Support the USA
		icon = ger_military_buildup
		allowed = {
			NOT = {
				tag = USA
				tag = CSA
				tag = PSA
				tag = TEX
				tag = NEE
				tag = BRA #has unique event bra.108
			}
		}
		visible = {
			country_exists = USA
			arms_factory > 4
			NOT = { has_socialist_government = yes }
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			NOT = {
				has_war_with = USA
				has_country_flag = ACW_supported_CSA
				has_country_flag = ACW_supported_USA
				has_country_flag = ACW_supported_TEX
				has_country_flag = ACW_supported_PSA
			}
			OR = {
				is_actual_major = yes
				is_in_north_america = yes
				is_in_south_america = yes
			}
			OR = {
				NOT = { is_in_faction_with = CAN }
				CAN = { has_country_flag = CAN_supports_USA }
			}
		}
		fire_only_once = yes
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 1999 }
		}
		custom_cost_text = 2000_infantry_equipment_1
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_equipment = { infantry_equipment < 4000 }
			}
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				tag = GER
				country_exists = TEX
			}
			modifier = {
				factor = 0
				tag = JAP
				country_exists = PSA
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_support_usa_dec"
			set_country_flag = ACW_supported_USA
			army_experience = 5
			send_equipment = { target = USA type = infantry_equipment amount = 2000 }
			USA = {
				country_event = amcivwar.611
			}
		}
	}

	ACW_support_aus_dec = {# Support the AUS
		icon = ger_military_buildup
		allowed = {
			NOT = {
				tag = USA
				tag = CSA
				tag = PSA
				tag = TEX
				tag = NEE
				tag = BRA #has unique event bra.108
			}
		}
		visible = {
			country_exists = TEX
			arms_factory > 4
			NOT = {	has_socialist_government = yes }
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			NOT = {
				has_war_with = TEX
				has_country_flag = ACW_supported_CSA
				has_country_flag = ACW_supported_USA
				has_country_flag = ACW_supported_TEX
				has_country_flag = ACW_supported_PSA
			}
			OR = {
				is_actual_major = yes
				is_in_north_america = yes
				is_in_south_america = yes
			}
			OR = {
				NOT = { is_in_faction_with = CAN }
				CAN = { has_country_flag = CAN_supports_TEX }
			}
		}
		fire_only_once = yes
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 1999 }
		}
		custom_cost_text = 2000_infantry_equipment_1
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_equipment = { infantry_equipment < 4000 }
			}
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				tag = JAP
				country_exists = PSA
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_support_aus_dec"
			set_country_flag = ACW_supported_TEX
			army_experience = 5
			send_equipment = { target = TEX type = infantry_equipment amount = 2000 }
			TEX = {
				country_event = amcivwar.611
			}
		}
	}

	ACW_support_psa_dec = {# Support the PSA
		icon = ger_military_buildup
		allowed = {
			NOT = {
				tag = USA
				tag = CSA
				tag = PSA
				tag = TEX
				tag = NEE
				tag = BRA #has unique event bra.108
			}
		}
		visible = {
			country_exists = PSA
			arms_factory > 4
			NOT = {	has_socialist_government = yes }
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			NOT = {
				has_war_with = PSA
				has_country_flag = ACW_supported_CSA
				has_country_flag = ACW_supported_USA
				has_country_flag = ACW_supported_TEX
				has_country_flag = ACW_supported_PSA
			}
			OR = {
				is_actual_major = yes
				is_in_north_america = yes
				is_in_south_america = yes
			}
			OR = {
				NOT = { is_in_faction_with = CAN }
				CAN = { has_country_flag = CAN_supports_PSA }
			}
		}
		fire_only_once = yes
		custom_cost_trigger = {
			has_equipment = {
				infantry_equipment > 1999
			}
		}
		custom_cost_text = 2000_infantry_equipment_1
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_equipment = { infantry_equipment < 4000 }
			}
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				tag = GER
				country_exists = TEX
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_support_psa_dec"
			set_country_flag = ACW_supported_PSA
			army_experience = 5
			send_equipment = { target = PSA type = infantry_equipment amount = 2000 }
			PSA = {
				country_event = amcivwar.611
			}
		}
	}
}

ACW_civil_war_decisions = {
	ACW_move_quickly = {
		icon = generic_army_support

		allowed = { always = no } #manually activated

		available = {
			USA = { surrender_progress > 0.40 }
		}

		selectable_mission = yes
		days_mission_timeout = 180
		is_good = no
		cost = 0
		fire_only_once = yes

		cancel_trigger = {
			NOT = { has_war_with = USA }
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout ACW_move_quickly"
			add_war_support = -0.20
			add_ideas = ACW_times_up
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_move_quickly"
			add_political_power = 100
			if = {
				limit = { has_idea = ACW_fired_up }
				modify_timed_idea = { idea = ACW_fired_up days = 90 }
			}
			else = {
				add_timed_idea = { idea = ACW_fired_up days = 90 }
			}
		}

		ai_will_do = {
			factor = 100
		}
	}

	PSA_deal_with_devil = {
		icon = generic_agreement

		allowed = {
			tag = PSA
		}
		available = {
			has_war_with = FROM
		}
		visible = {
			has_global_flag = USA_civil_war_begun_flag
			has_global_flag = { flag = USA_civil_war_begun_flag days > 90 }
			NOT = { has_global_flag = USA_civil_war_over_flag }
			is_in_faction = no
			OR = {
				AND = {
					NOT = { country_exists = USA }
					CSA = {
						exists = yes
						has_war_with = ROOT
						has_war_with = FROM
					}
				}
				AND = {
					NOT = { country_exists = CSA }
					USA = {
						exists = yes
						has_war_with = ROOT
						has_war_with = FROM
					}
				}
			}
			FROM = {
				exists = yes
				is_in_faction = no
				surrender_progress < 0.80
				OR = {
					tag = USA
					tag = TEX
				}
				NOT = {
					has_country_flag = ACW_refused_truce
					has_country_flag = ACW_accepted_truce
					has_country_flag = ACW_proposed_truce
				}
			}

			set_temp_variable = { enemy_advantage = 0 }
			if = {
				limit = { NOT = { country_exists = USA } }
				add_to_temp_variable = { enemy_advantage = CSA.num_of_military_factories }
				add_to_temp_variable = { enemy_advantage = CSA.num_controlled_states }
			}
			else = {
				add_to_temp_variable = { enemy_advantage = USA.num_of_military_factories }
				add_to_temp_variable = { enemy_advantage = USA.num_controlled_states }
			}
			subtract_from_temp_variable = { enemy_advantage = ROOT.num_of_military_factories }
			subtract_from_temp_variable = { enemy_advantage = ROOT.num_controlled_states }
			subtract_from_temp_variable = { enemy_advantage = FROM.num_of_military_factories }
			subtract_from_temp_variable = { enemy_advantage = FROM.num_controlled_states }
			check_variable = { enemy_advantage > 0 }
		}

		targets = { USA TEX }

		target_trigger = {
			FROM = {
				exists = yes
				is_in_faction = no
				surrender_progress < 0.80
				NOT = {
					has_country_flag = ACW_refused_truce
					has_country_flag = ACW_proposed_truce
				}
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision PSA_deal_with_devil target: [From.GetName]"
			set_country_flag = ACW_proposed_truce
			if = {
				limit = {
					NOT = { country_exists = USA }
				}
				CSA = { save_event_target_as = enemy_country }
			}
			else = {
				USA = { save_event_target_as = enemy_country }
			}
			FROM = {
				country_event = amcivwar.520
			}
		}
	}

	TEX_deal_with_devil = {
		icon = generic_agreement

		allowed = {
			tag = TEX
		}
		available = {
			has_war_with = FROM
		}
		visible = {
			has_global_flag = USA_civil_war_begun_flag
			has_global_flag = { flag = USA_civil_war_begun_flag days > 90 }
			NOT = { has_global_flag = USA_civil_war_over_flag }
			NOT = { country_exists = PSA }
			is_in_faction = no
			country_exists = CSA
			country_exists = USA
			FROM = {
				exists = yes
				is_in_faction = no
				surrender_progress < 0.80
				NOT = {
					has_country_flag = ACW_refused_truce
					has_country_flag = ACW_accepted_truce
					has_country_flag = ACW_proposed_truce
				}
			}
			OR = {
				AND = {
					USA = {
						has_war_with = ROOT
						has_war_with = FROM
					}
					set_temp_variable = { USA_advantage = 0 }
					add_to_temp_variable = { USA_advantage = USA.num_of_military_factories }
					add_to_temp_variable = { USA_advantage = USA.num_controlled_states }
					subtract_from_temp_variable = { USA_advantage = ROOT.num_of_military_factories }
					subtract_from_temp_variable = { USA_advantage = ROOT.num_controlled_states }
					subtract_from_temp_variable = { USA_advantage = FROM.num_of_military_factories }
					subtract_from_temp_variable = { USA_advantage = FROM.num_controlled_states }
					check_variable = { USA_advantage > 0 }
				}
				AND = {
					CSA = {
						has_war_with = ROOT
						has_war_with = FROM
					}
					set_temp_variable = { CSA_advantage = 0 }
					add_to_temp_variable = { CSA_advantage = CSA.num_of_military_factories }
					add_to_temp_variable = { CSA_advantage = CSA.num_controlled_states }
					subtract_from_temp_variable = { CSA_advantage = ROOT.num_of_military_factories }
					subtract_from_temp_variable = { CSA_advantage = ROOT.num_controlled_states }
					subtract_from_temp_variable = { CSA_advantage = FROM.num_of_military_factories }
					subtract_from_temp_variable = { CSA_advantage = FROM.num_controlled_states }
					check_variable = { CSA_advantage > 0 }
				}
			}
		}

		targets = { USA CSA }

		target_trigger = {
			FROM = {
				exists = yes
				is_in_faction = no
				surrender_progress < 0.80
				NOT = {
					has_country_flag = ACW_refused_truce
					has_country_flag = ACW_accepted_truce
					has_country_flag = ACW_proposed_truce
				}
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TEX_deal_with_devil target: [From.GetName]"
			set_country_flag = ACW_proposed_truce
			if = {
				limit = {
					FROM = { tag = USA }
				}
				CSA = { save_event_target_as = enemy_country }
			}
			else = {
				USA = { save_event_target_as = enemy_country }
			}
			FROM = {
				country_event = amcivwar.520
			}
		}
	}

	ACW_break_deal_with_devil = {
		icon = generic_prepare_civil_war

		allowed = {
			OR = {
				tag = TEX
				tag = PSA
			}
		}
		available = {
			NOT = { has_war_with = FROM }
		}
		visible = {
			has_country_flag = ACW_has_deal_with_devil
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			FROM = {
				exists = yes
				has_country_flag = ACW_deal_with_devil_@ROOT
				NOT = {
					tag = ROOT
					has_war_with = ROOT
				}
			}
		}

		targets = { USA CSA PSA TEX }

		target_trigger = {
			FROM = {
				has_country_flag = ACW_deal_with_devil_@ROOT
				NOT = {
					tag = ROOT
					has_war_with = ROOT
				}
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				FROM = { surrender_progress < 0.80 }
				has_war = yes
			}
			modifier = {
				factor = 0
				strength_ratio = { tag = FROM ratio < 0.75 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_break_deal_with_devil target: [From.GetName]"
			clr_country_flag = ACW_has_deal_with_devil
			clr_country_flag = ACW_deal_with_devil_@FROM
			FROM = {
				clr_country_flag = ACW_has_deal_with_devil
				clr_country_flag = ACW_deal_with_devil_@ROOT
			}
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			if = {
				limit = {
					CAN = {
						has_country_flag = CAN_deal_with_devil_@ROOT
						NOT = {
							has_war_with = ROOT
							has_war_with = FROM
						}
					}
				}
				hidden_effect = {
					save_event_target_as = can_ally
					FROM = { save_event_target_as = can_enemy }
					CAN = { country_event = amcivwar.526 }
				}
			}
			else_if = {
				limit = {
					CAN = {
						has_country_flag = CAN_deal_with_devil_@FROM
						NOT = {
							has_war_with = ROOT
							has_war_with = FROM
						}
					}
				}
				hidden_effect = {
					save_event_target_as = can_enemy
					FROM = { save_event_target_as = can_ally }
					CAN = { country_event = amcivwar.526 }
				}
			}
		}
	}

	USA_relocate_capital_civil_war = {
		icon = generic_political_discourse
		allowed = { original_tag = USA }
		available = {
			capital_scope = { state = 361 }
		}
		visible = {
			has_global_flag = USA_civil_war_begun_flag
			NOT = {
				has_global_flag = USA_civil_war_over_flag
				has_country_flag = USA_assassinated_reed
				has_country_flag = USA_ACW_compromise_rejected
				has_country_flag = USA_assassinated_long
				has_country_flag = USA_ACW_austerity_rejected
			}
			OR = {
				382 = { is_owned_and_controlled_by = USA }
				797 = { is_owned_and_controlled_by = USA }
				388 = { is_owned_and_controlled_by = USA }
				377 = { is_owned_and_controlled_by = USA }
			}
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = {
			factor = 20
			modifier = {
				factor = 0
				361 = { is_fully_controlled_by = USA }
			}
			modifier = {
				factor = 0
				controls_state = 361 #Maryland
				controls_state = 369 #Kentucky
				OR = {
					controls_state = 929 #West Virginia
					controls_state = 362 #Virginia
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision USA_relocate_capital_civil_war"
			set_country_flag = USA_relocate_capital_flag
			USA = {	country_event = amcivwar.76 }
		}
	}

	ACW_federal_front = {
		icon = generic_prepare_civil_war
		allowed = {
			OR = {
				tag = CSA
				tag = TEX
				tag = PSA
			}
		}
		available = {
			NOT = {
				has_idea = ACW_federal_front_idea
				has_idea = ACW_syndicalist_front_idea
				has_idea = ACW_longist_front_idea
				has_idea = ACW_pacific_front_idea
			}
		}
		visible = {
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			has_war_with = USA
		}

		days_re_enable = 180
		fire_only_once = no

		custom_cost_trigger = {
			command_power > 25
			has_political_power > 25
		}
		custom_cost_text = CP_25_PP_25

		ai_will_do = {
			factor = 250
			modifier = {
				factor = 0
				NOT = {
					any_controlled_state = {
						any_neighbor_state = {
							is_controlled_by = USA
						}
					}
				}
			}
			modifier = {
				factor = 2
				any_owned_state = {
					is_core_of = ROOT
					is_controlled_by = USA
				}
			}
			modifier = {
				factor = 2
				check_variable = { USA.num_controlled_states > CSA.num_controlled_states }
				check_variable = { USA.num_controlled_states > TEX.num_controlled_states }
				check_variable = { USA.num_controlled_states > PSA.num_controlled_states }
			}
			modifier = {
				factor = 0.25
				set_temp_variable = { global.num = 0 }
				all_of_scopes = {
					array = controlled_states
					if = {
						limit = { any_neighbor_state = { is_controlled_by = USA } }
						add_to_temp_variable = { global.num = 1 }
					}
				}
				check_variable = { global.num < 3 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_federal_front"
			hidden_effect = {
				add_command_power = -25
				add_political_power = -25
			}
			add_timed_idea = {
				idea = ACW_federal_front_idea
				days = 90
			}
			if = {
				limit = {
					CAN = {
						has_war_with = USA
						has_country_flag = CAN_joined_the_ACW
						has_country_flag = CAN_supports_@ROOT
					}
				}
				CAN = {
					add_timed_idea = {
						idea = ACW_federal_front_idea
						days = 90
					}
				}
			}
		}
	}

	ACW_syndicalist_front = {
		icon = generic_prepare_civil_war
		allowed = {
			OR = {
				tag = USA
				tag = TEX
				tag = PSA
			}
		}
		available = {
			NOT = {
				has_idea = ACW_federal_front_idea
				has_idea = ACW_syndicalist_front_idea
				has_idea = ACW_longist_front_idea
				has_idea = ACW_pacific_front_idea
				has_idea = ACW_assassinated_long
			}
		}
		visible = {
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			has_war_with = CSA
		}

		days_re_enable = 180
		fire_only_once = no

		custom_cost_trigger = {
			command_power > 25
			has_political_power > 25
		}
		custom_cost_text = CP_25_PP_25

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				tag = PSA
				country_exists = USA
			}
			modifier = {
				factor = 0.75
				tag = TEX
				country_exists = USA
			}
			modifier = {
				factor = 2
				tag = USA
			}
			modifier = {
				factor = 0
				NOT = {
					any_controlled_state = {
						any_neighbor_state = {
							is_controlled_by = CSA
						}
					}
				}
			}
			modifier = {
				factor = 2
				any_owned_state = {
					is_core_of = ROOT
					is_controlled_by = CSA
				}
			}
			modifier = {
				factor = 2
				check_variable = { CSA.num_controlled_states > USA.num_controlled_states }
				check_variable = { CSA.num_controlled_states > TEX.num_controlled_states }
				check_variable = { CSA.num_controlled_states > PSA.num_controlled_states }
			}
			modifier = {
				factor = 0.25
				set_temp_variable = { global.num = 0 }
				all_of_scopes = {
					array = controlled_states
					if = {
						limit = { any_neighbor_state = { is_controlled_by = CSA } }
						add_to_temp_variable = { global.num = 1 }
					}
				}
				check_variable = { global.num < 3 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_syndicalist_front"
			hidden_effect = {
				add_command_power = -25
				add_political_power = -25
			}
			add_timed_idea = {
				idea = ACW_syndicalist_front_idea
				days = 90
			}
			if = {
				limit = {
					CAN = {
						has_war_with = CSA
						has_country_flag = CAN_joined_the_ACW
						has_country_flag = CAN_supports_@ROOT
					}
				}
				CAN = {
					add_timed_idea = {
						idea = ACW_syndicalist_front_idea
						days = 90
					}
				}
			}
		}
	}

	ACW_longist_front = {
		icon = generic_prepare_civil_war
		allowed = {
			OR = {
				tag = USA
				tag = CSA
				tag = PSA
			}
		}
		available = {
			NOT = {
				has_idea = ACW_federal_front_idea
				has_idea = ACW_syndicalist_front_idea
				has_idea = ACW_longist_front_idea
				has_idea = ACW_pacific_front_idea
				has_idea = ACW_assassinated_reed
			}
		}
		visible = {
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			has_war_with = TEX
		}

		days_re_enable = 180
		fire_only_once = no

		custom_cost_trigger = {
			command_power > 25
			has_political_power > 25
		}
		custom_cost_text = CP_25_PP_25

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				tag = PSA
				country_exists = USA
			}
			modifier = {
				factor = 0.5
				tag = CSA
				country_exists = USA
			}
			modifier = {
				factor = 0
				NOT = {
					any_controlled_state = {
						any_neighbor_state = {
							is_controlled_by = TEX
						}
					}
				}
			}
			modifier = {
				factor = 2
				any_owned_state = {
					is_core_of = ROOT
					is_controlled_by = TEX
				}
			}
			modifier = {
				factor = 2
				check_variable = { TEX.num_controlled_states > USA.num_controlled_states }
				check_variable = { TEX.num_controlled_states > CSA.num_controlled_states }
				check_variable = { TEX.num_controlled_states > PSA.num_controlled_states }
			}
			modifier = {
				factor = 0.25
				set_temp_variable = { global.num = 0 }
				all_of_scopes = {
					array = controlled_states
					if = {
						limit = { any_neighbor_state = { is_controlled_by = TEX } }
						add_to_temp_variable = { global.num = 1 }
					}
				}
				check_variable = { global.num < 3 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_longist_front"
			hidden_effect = {
				add_command_power = -25
				add_political_power = -25
			}
			add_timed_idea = {
				idea = ACW_longist_front_idea
				days = 90
			}
			if = {
				limit = {
					CAN = {
						has_war_with = TEX
						has_country_flag = CAN_joined_the_ACW
						has_country_flag = CAN_supports_@ROOT
					}
				}
				CAN = {
					add_timed_idea = {
						idea = ACW_longist_front_idea
						days = 90
					}
				}
			}
		}
	}

	ACW_pacific_front = {
		icon = generic_prepare_civil_war
		allowed = {
			OR = {
				tag = USA
				tag = CSA
				tag = TEX
			}
		}
		available = {
			NOT = {
				has_idea = ACW_federal_front_idea
				has_idea = ACW_syndicalist_front_idea
				has_idea = ACW_longist_front_idea
				has_idea = ACW_pacific_front_idea
			}
		}
		visible = {
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			has_war_with = PSA
		}

		days_re_enable = 180
		fire_only_once = no

		custom_cost_trigger = {
			command_power > 25
			has_political_power > 25
		}
		custom_cost_text = CP_25_PP_25

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				NOT = { tag = USA }
				country_exists = USA
			}
			modifier = {
				factor = 20
				NOT = { country_exists = USA }
			}
			modifier = {
				factor = 0
				NOT = {
					any_controlled_state = {
						any_neighbor_state = {
							is_controlled_by = PSA
						}
					}
				}
			}
			modifier = {
				factor = 2
				any_owned_state = {
					is_core_of = ROOT
					is_controlled_by = PSA
				}
			}
			modifier = {
				factor = 2
				set_temp_variable = { usa_cont = 0 }
				add_to_temp_variable = { usa_cont = USA.num_controlled_states }
				set_temp_variable = { csa_cont = 0 }
				add_to_temp_variable = { csa_cont = CSA.num_controlled_states }
				set_temp_variable = { tex_cont = 0 }
				add_to_temp_variable = { tex_cont = TEX.num_controlled_states }
				set_temp_variable = { cal_cont = 0 }
				add_to_temp_variable = { cal_cont = PSA.num_controlled_states }
				check_variable = { cal_cont > usa_cont }
				check_variable = { cal_cont > csa_cont }
				check_variable = { cal_cont > tex_cont }
			}
			modifier = {
				factor = 0.25
				set_temp_variable = { global.num = 0 }
				all_of_scopes = {
					array = controlled_states
					if = {
						limit = { any_neighbor_state = { is_controlled_by = PSA } }
						add_to_temp_variable = { global.num = 1 }
					}
				}
				check_variable = { global.num < 3 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_pacific_front"
			hidden_effect = {
				add_command_power = -25
				add_political_power = -25
			}
			add_timed_idea = {
				idea = ACW_pacific_front_idea
				days = 90
			}
			if = {
				limit = {
					CAN = {
						has_war_with = PSA
						has_country_flag = CAN_joined_the_ACW
						has_country_flag = CAN_supports_@ROOT
					}
				}
				CAN = {
					add_timed_idea = {
						idea = ACW_pacific_front_idea
						days = 90
					}
				}
			}
		}
	}
	ACW_recruit_in_state_small = {
		name = ACW_recruit_in_state
		icon = us_flag

		allowed = {
			OR = {
				tag = USA
				tag = CSA
				tag = TEX
				tag = PSA
			}
		}

		available = {
			NOT = {
				has_country_flag = ACW_is_recruiting
				FROM = { is_demilitarized_zone = yes }
			}
		}

		visible = {
			controls_state = FROM
			NOT = { FROM = { has_state_flag = ACW_recruited_@ROOT } }
		}

		cancel_trigger = {
			OR = {
				NOT = { controls_state = FROM }
				has_global_flag = USA_civil_war_over_flag
			}
		}

		cost = 0
		days_remove = 6
		fire_only_once = no
		on_map_mode = map_only

		state_target = yes
		targets = { 357 376 377 387 388 389 390 933 934 935 }
		target_root_trigger = {
			OR = {
				has_global_flag = USA_leadup_to_the_war
				has_global_flag = USA_civil_war_begun_flag
			}
		}
		target_trigger = { controls_state = FROM }

		ai_will_do = {
			base = 10
			modifier = {
				set_temp_variable = { units_to_spawn = FROM.state_population_k }
				divide_temp_variable = { units_to_spawn = 1000 }
				round_temp_variable = units_to_spawn

				if = {
					limit = {
						NOT = { has_global_flag = KR_no_unit_limits }
						set_temp_variable = { unit_limit_factor = num_divisions }
						add_to_temp_variable = { unit_limit_factor = units_to_spawn }
						check_variable = { unit_limit_factor > max_divisions }
					}
					set_temp_variable = { units_to_spawn = 0 }
				}

				factor = units_to_spawn
			}
			modifier = {
				factor = 0
				tag = PSA
				NOT = {
					FROM = { any_neighbor_state = { is_core_of = ROOT } }
				}
			}
			modifier = {
				factor = 0
				NOT = {
					tag = USA
					has_country_flag = choice_made
				}
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled ACW_recruit_in_state_small target: [From.GetName]"
			clr_country_flag = ACW_is_recruiting
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_recruit_in_state_small target: [From.GetName]"
			set_country_flag = ACW_is_recruiting
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ACW_recruit_in_state_small target: [From.GetName]"
			clr_country_flag = ACW_is_recruiting
			FROM = {
				set_state_flag = ACW_recruited_@ROOT
				ACW_spawn_militia_divisions = yes
			}
		}
	}

	ACW_recruit_in_state_medium = {
		name = ACW_recruit_in_state
		icon = us_flag

		allowed = {
			OR = {
				tag = USA
				tag = CSA
				tag = TEX
				tag = PSA
			}
		}

		available = {
			NOT = {
				has_country_flag = ACW_is_recruiting
				FROM = { is_demilitarized_zone = yes }
			}
		}

		visible = {
			controls_state = FROM
			NOT = { FROM = { has_state_flag = ACW_recruited_@ROOT } }
		}

		cancel_trigger = {
			OR = {
				NOT = { controls_state = FROM }
				has_global_flag = USA_civil_war_over_flag
			}
		}

		cost = 0
		days_remove = 12
		fire_only_once = no
		on_map_mode = map_only

		state_target = yes
		targets = { 150 359 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 378 380 382 383 384 385 386 391 392 394 396 796 797 798 829 833 929 930 931 932 }
		target_root_trigger = {
			OR = {
				has_global_flag = USA_leadup_to_the_war
				has_global_flag = USA_civil_war_begun_flag
			}
		}
		target_trigger = { controls_state = FROM }

		ai_will_do = {
			base = 10
			modifier = {
				set_temp_variable = { units_to_spawn = FROM.state_population_k }
				divide_temp_variable = { units_to_spawn = 1000 }
				round_temp_variable = units_to_spawn

				if = {
					limit = {
						NOT = { has_global_flag = KR_no_unit_limits }
						set_temp_variable = { unit_limit_factor = num_divisions }
						add_to_temp_variable = { unit_limit_factor = units_to_spawn }
						check_variable = { unit_limit_factor > max_divisions }
					}
					set_temp_variable = { units_to_spawn = 0 }
				}

				factor = units_to_spawn
			}
			modifier = {
				factor = 0
				NOT = {
					tag = USA
					has_country_flag = choice_made
				}
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled ACW_recruit_in_state_medium target: [From.GetName]"
			clr_country_flag = ACW_is_recruiting
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_recruit_in_state_medium target: [From.GetName]"
			set_country_flag = ACW_is_recruiting
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ACW_recruit_in_state_medium target: [From.GetName]"
			clr_country_flag = ACW_is_recruiting
			FROM = {
				set_state_flag = ACW_recruited_@ROOT
				ACW_spawn_militia_divisions = yes
			}
		}
	}

	ACW_recruit_in_state_large = {
		name = ACW_recruit_in_state
		icon = us_flag

		allowed = {
			OR = {
				tag = USA
				tag = CSA
				tag = TEX
				tag = PSA
			}
		}

		available = {
			NOT = {
				has_country_flag = ACW_is_recruiting
				FROM = { is_demilitarized_zone = yes }
			}
			set_temp_variable = { units_to_spawn = FROM.state_population_k }
			divide_temp_variable = { units_to_spawn = 1000 }
			round_temp_variable = units_to_spawn
		}

		visible = {
			controls_state = FROM
			NOT = { FROM = { has_state_flag = ACW_recruited_@ROOT } }
		}

		cancel_trigger = {
			OR = {
				NOT = { controls_state = FROM }
				has_global_flag = USA_civil_war_over_flag
			}
		}

		cost = 0
		days_remove = 18
		fire_only_once = no
		on_map_mode = map_only

		state_target = yes
		targets = { 261 358 360 393 395 975 }
		target_root_trigger = {
			OR = {
				has_global_flag = USA_leadup_to_the_war
				has_global_flag = USA_civil_war_begun_flag
			}
		}
		target_trigger = { controls_state = FROM }

		ai_will_do = {
			base = 10
			modifier = {
				set_temp_variable = { units_to_spawn = FROM.state_population_k }
				divide_temp_variable = { units_to_spawn = 1000 }
				round_temp_variable = units_to_spawn

				if = {
					limit = {
						NOT = { has_global_flag = KR_no_unit_limits }
						set_temp_variable = { unit_limit_factor = num_divisions }
						add_to_temp_variable = { unit_limit_factor = units_to_spawn }
						check_variable = { unit_limit_factor > max_divisions }
					}
					set_temp_variable = { units_to_spawn = 0 }
				}

				factor = units_to_spawn
			}
			modifier = {
				factor = 0
				NOT = {
					tag = USA
					has_country_flag = choice_made
				}
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled ACW_recruit_in_state_large target: [From.GetName]"
			clr_country_flag = ACW_is_recruiting
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_recruit_in_state_large target: [From.GetName]"
			set_country_flag = ACW_is_recruiting
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ACW_recruit_in_state_large target: [From.GetName]"
			clr_country_flag = ACW_is_recruiting
			FROM = {
				set_state_flag = ACW_recruited_@ROOT
				ACW_spawn_militia_divisions = yes
			}
		}
	}

	PSA_Operation_Liberty_mission = {
		icon = generic_ignite_civil_war

		allowed = { always = no } #manually activated

		available = {
			has_full_control_of_state = 387 #Idaho
			has_full_control_of_state = 380 #Utah
			has_full_control_of_state = 377	#Arizona
		}

		cancel_trigger = {
			has_global_flag = USA_civil_war_over_flag
		}

		days_mission_timeout = 150
		is_good = no
		fire_only_once = yes

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout PSA_Operation_Liberty_mission"
			add_timed_idea = {
				idea = PSA_failed_operation_liberty
				days = 120
			}
			hidden_effect = {
				country_event = pacificstates.202
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision PSA_Operation_Liberty_mission"
			country_event = pacificstates.201
		}
	}
}

ACW_restore_order_decisions = {
	ACW_suppress_resistance = {
		icon = generic_police_action

		available = {
			has_full_control_of_state = FROM
		}

		visible = {
			FROM = { has_resistance = yes }
		}

		state_target = yes
		target_array = USA_restoring_order_array
		target_trigger = {
			FROM = { has_resistance = yes }
		}

		cost = 15
		days_remove = 90
		on_map_mode = map_only

		modifier = {
			political_power_cost = 0.05
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = FROM.resistance
			}
			modifier = {
				add = FROM.resistance_target
			}
			modifier = {
				factor = 0
				FROM = {
					compliance > 40
					resistance < 10
				}
			}
			modifier = {
				factor = 0
				political_power_daily < 0
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_suppress_resistance target: [From.GetName]"
			FROM = {
				add_compliance = 5
				add_resistance_target = {
					amount = -10
					tooltip = ACW_suppress_resistance_tooltip
					days = 90
				}
				set_garrison_strength = 1
			}
		}
	}
	ACW_restore_order = {
		icon = generic_army_support

		available = {
			has_full_control_of_state = FROM
			FROM = { any_neighbor_state = { is_core_of = ROOT } }
			if = {
				limit = { FROM = { has_resistance = yes } }
				FROM = { compliance > 40 } #separate scopes for separate trigger tooltips
				FROM = { resistance < 10 }
			}
		}

		visible = {
			NOT = { FROM = { is_core_of = ROOT } }
		}

		state_target = yes
		target_array = USA_restoring_order_array
		target_trigger = {
			NOT = { FROM = { is_core_of = ROOT } }
		}

		cost = 0
		days_remove = 60
		on_map_mode = map_only
		cancel_if_not_visible = yes

		ai_will_do = {
			base = 10
			modifier = {
				add = FROM.state_strategic_value
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ACW_restore_order target: [From.GetName]"
			if = {
				limit = { FROM = { is_claimed_by = ROOT } }
				remove_state_claim = FROM
			}
			add_state_core = FROM
			FROM = {
				if = {
					limit = { has_variable = ACW_revolting_tag }
					remove_core_of = var:ACW_revolting_tag
					add_claim_by = var:ACW_revolting_tag
					if = {
						limit = {
							NOT = { is_in_array = { ACW_revolting_tag:USA_restoring_order_array = THIS } }
						}
						add_to_array = { ACW_revolting_tag:USA_restoring_order_array = THIS }
					}
					clear_variable = ACW_revolting_tag
				}
				hidden_effect = { remove_ACW_cores_on_state = yes }
			}
			remove_from_array = { ROOT.USA_restoring_order_array = FROM }
			if = {
				limit = { check_variable = { USA_restoring_order_array^num < 1 } }
				clear_array = USA_restoring_order_array
			}
		}
	}
	USA_rebuild_alaska = {
		icon = generic_construction

		available = {
			controls_state = 463
		}

		visible = {
			owns_state = 463
			NOT = { 463 = { is_core_of = ROOT } }
		}

		cost = 15
		days_remove = 30
		fire_only_once = yes

		ai_will_do = { base = 5 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove USA_rebuild_alaska"
			if = {
				limit = { 463 = { is_claimed_by = ROOT } }
				remove_state_claim = 463
			}
			add_state_core = 463
		}
	}
	USA_rebuild_pacific = {
		icon = generic_construction

		available = {
			629 = { is_fully_controlled_by = ROOT }
		}

		visible = {
			owns_state = 629
			OR = {
				629 = { NOT = { is_core_of = ROOT } } #Hawaii
				630 = { NOT = { is_core_of = ROOT } } #Johnston Atoll
				631 = { NOT = { is_core_of = ROOT } } #Midway Island
				632 = { NOT = { is_core_of = ROOT } } #Wake Island
				638 = {
					is_owned_by = ROOT
					NOT = { is_core_of = ROOT } #Guam
				}
				642 = { NOT = { is_core_of = ROOT } } #Phoenix Island
				726 = { NOT = { is_core_of = ROOT } } #Samoa
				727 = { NOT = { is_core_of = ROOT } } #Line Islands
			}
		}

		cost = 30
		days_remove = 30
		fire_only_once = yes

		ai_will_do = { base = 5 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove USA_rebuild_pacific"
			every_state = {
				limit = {
					is_american_pacific_islands = yes
					NOT = { is_core_of = ROOT }
				}
				if = {
					limit = { is_claimed_by = ROOT }
					remove_claim_by = ROOT
				}
				if = {
					limit = { NOT = { is_core_of = ROOT } }
					add_core_of = ROOT
				}
			}
		}
	}
	USA_rebuild_puerto_rico = {
		icon = generic_construction

		allowed = {
			NOT = { tag = CSA }
		}

		available = {
			686 = {
				is_fully_controlled_by = ROOT
				compliance > 40
			}
		}

		visible = {
			has_global_flag = USA_civil_war_over_flag
			owns_state = 686
			NOT = { 686 = { is_core_of = ROOT } }
		}

		cost = 25
		days_remove = 100
		fire_only_once = yes

		ai_will_do = { base = 5 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove USA_rebuild_puerto_rico"
			if = {
				limit = { 686 = { is_claimed_by = ROOT } }
				remove_state_claim = 686
			}
			add_state_core = 686
			686 = { remove_ACW_cores_on_state = yes }
		}
	}
}

ACW_rocky_mountain_ceasefire_decisions = {
	ACW_break_ceasefire = {
		icon = generic_prepare_civil_war

		available = {
			controls_all_owned_states = yes
			OR = {
				custom_trigger_tooltip = {
					tooltip = ACW_ceasefire_six_months
					has_global_flag = { flag = PSA_rockies_ceasefire days > 180 }
				}
				FROM = { surrender_progress > 0.2 }
				is_in_faction = yes
				FROM = { is_in_faction = yes }
			}
		}

		visible = {
			has_global_flag = PSA_rockies_ceasefire
			can_declare_war_on = FROM
			is_subject = no
		}

		targets = { USA CSA TEX PSA }
		target_root_trigger = { has_global_flag = PSA_rockies_ceasefire }
		target_trigger = {
			can_declare_war_on = FROM
		}

		cost = 0
		fire_only_once = yes
		war_with_target_on_complete = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				has_global_flag = USA_ai_do_not_break_ceasefire
			}
			modifier = {
				factor = 0
				FROM = { alliance_strength_ratio > 1 }
				strength_ratio = { tag = FROM ratio < 1 }
			}
			modifier = {
				factor = 0
				FROM = {
					is_in_faction = yes
					alliance_strength_ratio > 1
					any_allied_country = {
						strength_ratio = { tag = ROOT ratio > 0.9 }
					}
				}
			}
			modifier = {
				factor = 0
				USA = { has_country_flag = USA_considering_reunion }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ACW_break_ceasefire target: [From.GetName]"
			clr_global_flag = PSA_rockies_ceasefire
			add_war_support = 0.10
			hidden_effect = {
				every_owned_state = {
					limit = {
						is_not_claim_or_core_of_ROOT = yes
						OR = {
							state = 463 #Alaska
							state = 685 #Panama Canal
							is_mainland_america = yes
						}
					}
					add_claim_by = FROM
				}
			}
			FROM = {
				every_owned_state = {
					limit = {
						is_not_claim_or_core_of_ROOT = yes
						OR = {
							state = 463 #Alaska
							state = 685 #Panama Canal
							is_mainland_america = yes
						}
					}
					add_claim_by = ROOT
				}
			}
			diplomatic_relation = {
				country = ROOT
				relation = non_aggression_pact
				active = no
			}
			create_wargoal = {
				type = annex_everything
				target = FROM
			}
			FROM = {
				create_wargoal = {
					type = annex_everything
					target = ROOT
				}
			}
		}
	}

	USA_reunite_with_PSA = {
		icon = us_flag
		allowed = { tag = USA }
		available = {
			ROOT = {
				has_war = no
				has_elected_government = yes
				is_subject = no
			}
			FROM = {
				has_war = no
				has_elected_government = yes
				OR = {
					is_subject = no
					is_subject_of = USA
				}
			}
			custom_trigger_tooltip = {
				tooltip = ACW_ceasefire_one_month
				has_global_flag = { flag = PSA_rockies_ceasefire days > 29 }
			}
		}
		visible = {
			has_global_flag = PSA_rockies_ceasefire
			country_exists = FROM
			NOT = { has_war_with = FROM }
		}

		targets = { PSA }
		target_root_trigger = {
			has_global_flag = PSA_rockies_ceasefire
		}
		target_trigger = {
			NOT = { has_war_with = FROM }
		}

		fire_only_once = yes
		cost = 25

		ai_will_do = {
			factor = 200
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision USA_reunite_with_PSA target: [From.GetName]"
			set_country_flag = USA_considering_reunion
			PSA = {
				country_event = ustates.530
			}
		}
	}
}

