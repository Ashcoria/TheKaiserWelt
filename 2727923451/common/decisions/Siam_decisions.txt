###########################
# Siamese Decisions
###########################
# By PPsyrius
###########################

war_measures = {

	SIA_capital_relocation = {
		icon = GFX_decision_generic_construction
		highlight_states = {
			highlight_provinces = { 1488 }
		}
		allowed = { original_tag = SIA }
		available = {
			822 = { is_owned_and_controlled_by = SIA } # Chiang Mai
			289 = {
				is_owned_and_controlled_by = SIA  # Bangkok
				is_capital = yes
			}
			NOT = {
				OR = {
					AND = {
						NOT = { owns_state = 882 } # Chaiyaburi
						controls_state = 882
					}
					AND = {
						NOT = { owns_state = 756 } # Lower Shan
						controls_state = 756
					}
					AND = {
						NOT = { owns_state = 831 } # Morlamaeng
						controls_state = 831
					}
					any_enemy_country = { owns_state = 288 } # Yangon
				}
				has_country_flag = SIA_byebye_Bangkok
			}
		}

		cost = 25
		days_remove = 15

		ai_will_do = {
			base = 0
			modifier = {
				add = 10 # oh shit they are getting close!
				OR = {
					AND = {
						owns_state = 825 # Phra Tabong
						NOT = { controls_state = 825 }
					}
					AND = {
						owns_state = 824 # East Coast
						NOT = { controls_state = 824 }
					}
					AND = {
						owns_state = 749 # Thawai
						NOT = { controls_state = 205 }
					}
					AND = {
						owns_state = 724 # Southern Coast
						NOT = { controls_state = 223 }
					}
				}
			}
		}

		visible = {
			has_war = yes
			has_civil_war = no
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_capital_relocation"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_capital_relocation"
			if = {
				limit = { controls_state = 289 } # Please hold Bangkok until the all officers have evacuated
				set_capital = { state = 822 }
				set_country_flag = SIA_byebye_Bangkok

				289 = { # Bangkok
					remove_building = {
						type = arms_factory
						level = 1
					}
					remove_building = {
						type = industrial_complex
						level = 1
					}
					add_victory_points = { province = 7408 value = -8 } # Bangkok
				}
				822 = { # Chiang Mai
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					hidden_effect = {
						damage_building = { type = arms_factory damage = 0.1 }
						damage_building = { type = industrial_complex damage = 0.1 }
					}
					add_victory_points = { province = 1488 value = 8 } # Chiang Mai
				}
			}
			custom_effect_tooltip = SIA_relocate_capital_from_Bangkok_tt
		}
	}

}

SIA_Siamese-Burmese_War_category = {

	SIA_capture_Taunggyi = {
		icon = GFX_decision_hand_grab
		allowed = { original_tag = SIA }
		highlight_states = {
			highlight_provinces = { 7603 }
		}

		is_good = no

		activation = {
			SIA = { has_war_with = BRM }
			NOT = { controls_province = 7603 } # Taunggyi
		}

		available = {
			hidden_trigger = { always = no }
		}

		visible = {
			SIA = {
				has_war_with = BRM
				NOT = { controls_province = 7603 } # Taunggyi
			}
			BRM = { has_capitulated = no }
		}

		fire_only_once = no
		selectable_mission = no
		days_mission_timeout = 30

		cancel_if_not_visible = yes
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout SIA_capture_Taunggyi"
			SIA = { add_war_support = -0.01 }
			BRM = { add_war_support = 0.01 }
		}
	}

	SIA_capture_Mandalay = {
		icon = GFX_decision_hand_grab
		allowed = { original_tag = SIA }
		highlight_states = {
			highlight_provinces = { 1492 }
		}

		is_good = no

		activation = {
			SIA = { has_war_with = BRM }
			NOT = { controls_province = 1492 } # Mandalay
		}

		available = {
			hidden_trigger = { always = no }
		}

		visible = {
			SIA = {
				has_war_with = BRM
				NOT = { controls_province = 1492 } # Mandalay
			}
			BRM = { has_capitulated = no }
		}

		fire_only_once = no
		selectable_mission = no
		days_mission_timeout = 30

		cancel_if_not_visible = yes
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout SIA_capture_Mandalay"
			SIA = { add_war_support = -0.02 }
			BRM = { add_war_support = 0.02 }
		}
	}

	SIA_capture_Taungoo = {
		icon = GFX_decision_hand_grab
		allowed = { original_tag = SIA }
		highlight_states = {
			highlight_provinces = { 12256 }
		}

		is_good = no

		activation = {
			SIA = { has_war_with = BRM }
			NOT = { controls_province = 12256 } # Taungoo
		}

		available = {
			hidden_trigger = { always = no }
		}

		visible = {
			SIA = {
				has_war_with = BRM
				NOT = { controls_province = 12256 } # Taungoo
			}
			BRM = { has_capitulated = no }
		}

		fire_only_once = no
		selectable_mission = no
		days_mission_timeout = 30

		cancel_if_not_visible = yes
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout SIA_capture_Taungoo"
			SIA = { add_war_support = -0.01 }
			BRM = { add_war_support = 0.01 }
		}
	}

	SIA_capture_Yangon = {
		icon = GFX_decision_hand_grab
		allowed = { original_tag = SIA }
		highlight_states = {
			highlight_provinces = { 1330 }
		}

		is_good = no

		activation = {
			SIA = { has_war_with = BRM }
			NOT = { controls_province = 1330 } # Yangon
		}

		available = {
			hidden_trigger = { always = no }
		}

		visible = {
			SIA = {
				has_war_with = BRM
				NOT = { controls_province = 1330 } # Yangon
			}
			BRM = { has_capitulated = no }
		}

		fire_only_once = no
		selectable_mission = no
		days_mission_timeout = 30

		cancel_if_not_visible = yes
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout SIA_capture_Yangon"
			SIA = { add_war_support = -0.02 }
			BRM = { add_war_support = 0.02 }
		}
	}

	BRM_capture_Mawlamyine = {
		icon = GFX_decision_hand_grab
		allowed = { original_tag = BRM }
		highlight_states = {
			highlight_provinces = { 1403 }
		}

		is_good = no

		activation = {
			BRM = { has_war_with = SIA }
			NOT = { controls_province = 1403 } # Mawlamyine
		}

		available = {
			hidden_trigger = { always = no }
		}

		visible = {
			BRM = {
				has_war_with = SIA
				NOT = { controls_province = 1403 } # Mawlamyine
			}
			SIA = { has_capitulated = no }
		}

		fire_only_once = no
		selectable_mission = no
		days_mission_timeout = 30

		cancel_if_not_visible = yes
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout BRM_capture_Mawlamyine"
			BRM = { add_war_support = -0.02 }
			SIA = { add_war_support = 0.02 }
		}
	}

	BRM_capture_Kengtung = {
		icon = GFX_decision_hand_grab
		allowed = { original_tag = BRM }
		highlight_states = {
			highlight_provinces = { 7909 }
		}

		is_good = no

		activation = {
			BRM = { has_war_with = SIA }
			NOT = { controls_province = 7909 } # Kengtung
		}

		available = {
			hidden_trigger = { always = no }
		}

		visible = {
			BRM = {
				has_war_with = SIA
				NOT = { controls_province = 7909 } # Kengtung
			}
			SIA = { has_capitulated = no }
		}

		fire_only_once = no
		selectable_mission = no
		days_mission_timeout = 30

		cancel_if_not_visible = yes
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout BRM_capture_Kengtung"
			BRM = { add_war_support = -0.01 }
			SIA = { add_war_support = 0.01 }
		}
	}

	BRM_capture_Chiang_Mai = {
		icon = GFX_decision_hand_grab
		allowed = { original_tag = BRM }
		highlight_states = {
			highlight_provinces = { 1488 }
		}

		is_good = no

		activation = {
			BRM = { has_war_with = SIA }
			NOT = { controls_province = 1488 } # Chiang Mai
		}

		available = {
			hidden_trigger = { always = no }
		}

		visible = {
			BRM = {
				has_war_with = SIA
				NOT = { controls_province = 1488 } # Chiang Mai
			}
			SIA = { has_capitulated = no }
		}

		fire_only_once = no
		selectable_mission = no
		days_mission_timeout = 30

		cancel_if_not_visible = yes
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout BRM_capture_Chiang_Mai"
			BRM = { add_war_support = -0.02 }
			SIA = { add_war_support = 0.02 }
		}
	}

	BRM_capture_Dawei = {
		icon = GFX_decision_hand_grab
		allowed = { original_tag = BRM }
		highlight_states = {
			highlight_provinces = { 1315 }
		}

		is_good = no

		activation = {
			BRM = { has_war_with = SIA }
			NOT = { controls_province = 1315 } # Dawei
		}

		available = {
			hidden_trigger = { always = no }
		}

		visible = {
			BRM = {
				has_war_with = SIA
				NOT = { controls_province = 1315 } # Dawei
			}
			SIA = { has_capitulated = no }
		}

		fire_only_once = no
		selectable_mission = no
		days_mission_timeout = 30

		cancel_if_not_visible = yes
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout BRM_capture_Dawei"
			BRM = { add_war_support = -0.01 }
			SIA = { add_war_support = 0.01 }
		}
	}
}

political_actions = {

	SIA_move_capital_back = {
		icon = GFX_decision_generic_construction
		highlight_states = {
			highlight_provinces = { 7408 }
		}
		allowed = { original_tag = SIA }
		available = {
			NOT = { has_war = yes } # not sure if "has_war = no" works here sure better be safe here, fck PDX code logic
			289 = { is_owned_and_controlled_by = SIA }  # Bangkok
			822 = {  # Chiang Mai
				is_owned_and_controlled_by = SIA
				is_capital = yes
			}
		}

		cost = 50
		days_remove = 30

		ai_will_do = {
			factor = 20
			modifier = {
				add = 10000 # Yo, move back now
				has_war = no
			}
		}

		visible = {
			has_country_flag = SIA_byebye_Bangkok
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_move_capital_back"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_move_capital_back"
			if = {
				limit = { controls_state = 822 } # Please hold Chiang Mai
				set_capital = { state = 289 remember_old_capital = no }
				clr_country_flag = SIA_byebye_Bangkok

				822 = { # Chiang Mai
					remove_building = {
						type = arms_factory
						level = 1
					}
					remove_building = {
						type = industrial_complex
						level = 1
					}
					add_victory_points = { province = 1488 value = -8 } # Chiang Mai
				}
				289 = { # Bangkok
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					add_victory_points = { province = 7408 value = 8 } # Bangkok
				}
			}
			custom_effect_tooltip = SIA_relocate_capital_back_from_Chiang_Mai_tt
		}
	}

	SIA_country_namechange_decision = {
		icon = GFX_decision_generic_nationalism
		allowed = { original_tag = SIA }
		available = {
			hidden_trigger = {
				is_ai = no
			}
			is_subject = no
			NOT = { has_country_flag = SIA_THAILAND }
		}

		cost = 100

		visible = {
			NOT = { has_country_flag = SIA_THAILAND }
			OR = {
				has_cosmetic_tag = SIA
				has_cosmetic_tag = SIA_REP
			}
			date > 1939.1.1
		}

		ai_will_do = { base = 0 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_country_namechange_decision"
			set_country_flag = SIA_THAILAND
			if = {
				limit = { has_cosmetic_tag = SIA }
				set_cosmetic_tag = THI
			}
			if = {
				limit = { has_cosmetic_tag = SIA_REP }
				set_cosmetic_tag = THI_REP
			}

			add_stability = 0.03 # Fck cheesy players for using this as a stab farm, since this isn't intended as one

			hidden_effect = {
				set_party_name = { # CPT
					ideology = totalist
					long_name = SIA_totalist_party_TH_long
					name = SIA_totalist_party_TH
				}
				set_party_name = { # KST
					ideology = syndicalist
					long_name = SIA_syndicalist_party_TH_long
					name = SIA_syndicalist_party_TH
				}
			}
		}
	}

	SIA_country_namechange_back_decision = {
		icon = GFX_decision_generic_nationalism
		allowed = { original_tag = SIA }
		available = {
			hidden_trigger = {
				is_ai = no
			}
			is_subject = no
			has_country_flag = SIA_THAILAND
		}

		cost = 100

		visible = {
			has_country_flag = SIA_THAILAND
			OR = {
				has_cosmetic_tag = THI
				has_cosmetic_tag = THI_REP
			}
			date > 1939.1.1
		}

		ai_will_do = { base = 0 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_country_namechange_back_decision"
			clr_country_flag = SIA_THAILAND
			if = {
				limit = { has_cosmetic_tag = THI }
				set_cosmetic_tag = SIA
			}
			if = {
				limit = { has_cosmetic_tag = THI_REP }
				set_cosmetic_tag = SIA_REP
			}

			hidden_effect = {
				set_party_name = { # CPS
					ideology = totalist
					long_name = SIA_totalist_party_long
					name = SIA_totalist_party
				}
				set_party_name = { # KSS
					ideology = syndicalist
					long_name = SIA_syndicalist_party_long
					name = SIA_syndicalist_party
				}
			}
		}
	}

	SIA_tarutao = {
		icon = GFX_decision_oppression
		highlight_states = {
			highlight_provinces = { 10156 }
		}

		allowed = { original_tag = SIA }
		available = {
			has_country_flag = SIA_Civil_War_Ended
		}

		fire_only_once = yes

		cost = 50
		days_remove = 180

		ai_will_do = {
			base = 0
		}

		visible = {
			has_country_flag = SIA_Civil_War_Ended
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_tarutao"

			country_event = { id = siam.62 hours = 6 } # Openning of the Tarutao Correction Center
		}
	}

	SIA_resume_research_funding = {
		icon = GFX_decision_generic_research
		allowed = { always = no } #activated by effect
		available = {
			OR = {
				has_idea = SIA_military_expense_cut
				has_idea = SIA_military_expense_cut_rifle
			}
		}

		fire_only_once = yes

		cost = 150
		days_remove = 7

		ai_will_do = {
			factor = 1000
		}

		visible = {
			has_political_power > 0
			OR = {
				has_country_flag = SIA_PRAJADHIPOK_REFORM # TEMPORARY MEASURE
				has_country_flag = SIA_no_civil_war
				has_country_flag = SIA_post_war_reconstruction
			}
			OR = {
				has_idea = SIA_military_expense_cut
				has_idea = SIA_military_expense_cut_rifle
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_resume_research_funding"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_resume_research_funding"
			if = {
				limit = { has_idea = SIA_military_expense_cut }
				remove_ideas = SIA_military_expense_cut
			}
			if = {
				limit = { has_idea = SIA_military_expense_cut_rifle }
				remove_ideas = SIA_military_expense_cut_rifle
			}
		}
	}
}

SIA_infrastructure_category = {
	SIA_hire_foreign_engineers = {
		icon = GFX_decision_hol_attract_foreign_investors
		allowed = { always = no } #activated by effect
		available = {
			has_idea = SIA_engineer_shortage
		}

		fire_only_once = yes

		cost = 150

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		visible = {
			has_idea = SIA_engineer_shortage
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_hire_foreign_engineers"
			remove_ideas = SIA_engineer_shortage
		}
	}
	SIA_north_road_1 = {
		icon = GFX_decision_road
		highlight_states = {
			highlight_state_targets = { state = 289 state = 831 }
		}
		allowed = { always = no } #activated by effect
		available = {
			owns_state = 831
			owns_state = 289
		}

		fire_only_once = yes

		cost = 75
		days_remove = 180

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		visible = {
			owns_state = 289
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_north_road_1"
			set_country_flag = SIA_north_road_1_done
			831 = { # Moulmein
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			289 = { # Bangkok
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	SIA_north_road_2 = {
		icon = GFX_decision_road
		highlight_states = {
			highlight_state_targets = { state = 822 }
		}
		allowed = { always = no } #activated by effect
		available = {
			owns_state = 822
		}

		fire_only_once = yes

		cost = 75
		days_remove = 180

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		visible = {
			has_country_flag = SIA_north_road_1_done
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_north_road_2"
			set_country_flag = SIA_north_road_2_done
			822 = { # Lanna
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	SIA_north_road_3 = {
		icon = GFX_decision_road
		highlight_states = {
			highlight_state_targets = { state = 822 }
		}
		allowed = { original_tag = SIA }
		available = {
			owns_state = 822
		}

		fire_only_once = yes

		cost = 75
		days_remove = 180

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		visible = {
			has_country_flag = SIA_north_road_2_done
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_north_road_3"
			set_country_flag = SIA_north_road_3_done
			822 = { # Lanna
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	SIA_north_road_4 = {
		icon = GFX_decision_road
		highlight_states = {
			highlight_state_targets = { state = 756 state = 72 }
		}
		allowed = { always = no } #activated by effect
		available = {
			owns_state = 756
			owns_state = 72
		}

		fire_only_once = yes

		cost = 150
		days_remove = 180

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		visible = {
			has_country_flag = SIA_north_road_3_done
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_north_road_4"
			756 = { # Lower Shan
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			72 = { # Upper Shan
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	SIA_isan_road_1 = {
		icon = GFX_decision_road
		highlight_states = {
			highlight_state_targets = { state = 289 state = 823 }
		}
		allowed = { always = no } #activated by effect
		available = {
			owns_state = 289
			owns_state = 823
		}

		fire_only_once = yes

		cost = 150
		days_remove = 180

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		visible = {
			owns_state = 289
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_isan_road_1"
			set_country_flag = SIA_isan_road_1_done
			289 = { # Bangkok
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			823 = { # Isan
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	SIA_isan_road_2 = {
		icon = GFX_decision_road
		highlight_states = {
			highlight_state_targets = { state = 823 }
		}
		allowed = { always = no } #activated by effect
		available = {
			owns_state = 823
		}

		fire_only_once = yes

		cost = 75
		days_remove = 180

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		visible = {
			has_country_flag = SIA_isan_road_1_done
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_isan_road_2"
			set_country_flag = SIA_isan_road_2_done
			823 = { # Isan
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	SIA_isan_road_3 = {
		icon = GFX_decision_road
		highlight_states = {
			highlight_state_targets = { state = 670 }
		}
		allowed = { always = no } #activated by effect
		available = {
			owns_state = 670
		}

		fire_only_once = yes

		cost = 75
		days_remove = 180

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		visible = {
			has_country_flag = SIA_isan_road_2_done
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_isan_road_3"
			670 = { # Laos
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	SIA_east_road_2 = {
		icon = GFX_decision_road
		highlight_states = {
			highlight_state_targets = { state = 824 state = 825 }
		}
		allowed = { always = no } #activated by effect
		available = {
			owns_state = 824
			owns_state = 825
		}

		fire_only_once = yes

		cost = 150
		days_remove = 180

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		visible = {
			owns_state = 289
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_east_road_2"
			set_country_flag = SIA_east_road_2_done
			824 = { # Rayong
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			825 = { # Phra Tabong
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	SIA_east_road_3 = {
		icon = GFX_decision_road
		highlight_states = {
			highlight_state_targets = { state = 825 state = 750 }
		}
		allowed = { always = no } #activated by effect
		available = {
			owns_state = 825
			owns_state = 750
		}

		fire_only_once = yes

		cost = 150
		days_remove = 180

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		visible = {
			has_country_flag = SIA_east_road_2_done
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_east_road_3"
			825 = { # Phra Tabong
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			750 = { # Phnom Penh
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	SIA_pakt_road_1 = {
		icon = GFX_decision_road
		highlight_states = {
			highlight_state_targets = { state = 289 state = 724 }
		}
		allowed = { always = no } #activated by effect
		available = {
			owns_state = 289
			owns_state = 724
		}

		fire_only_once = yes

		cost = 150
		days_remove = 180

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		visible = {
			owns_state = 289
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_pakt_road_1"
			set_country_flag = SIA_pakt_road_1_done
			289 = { # Bangkok
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			724 = { # South
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	SIA_pakt_road_2 = {
		icon = GFX_decision_road
		highlight_states = {
			highlight_state_targets = { state = 724 state = 830 }
		}
		allowed = { always = no } #activated by effect
		available = {
			owns_state = 724
			owns_state = 830
		}

		fire_only_once = yes

		cost = 150
		days_remove = 180

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		visible = {
			has_country_flag = SIA_pakt_road_1_done
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_pakt_road_2"
			set_country_flag = SIA_pakt_road_2_done
			724 = { # South
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			830 = { # Pattani
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	SIA_pakt_road_3 = {
		icon = GFX_decision_road
		highlight_states = {
			highlight_state_targets = { state = 999 state = 751 }
		}
		allowed = { always = no } #activated by effect
		available = {
			owns_state = 999
			owns_state = 751
		}

		fire_only_once = yes

		cost = 150
		days_remove = 180

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		visible = {
			has_country_flag = SIA_pakt_road_2_done
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_pakt_road_3"
			999 = { # Alor Setar
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			751 = { # Kedah
				if = {
					limit = { is_owned_by = SIA }
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	SIA_Electrification = {
		icon = GFX_decision_electrify

		allowed = {
			OR = {
				tag = SIA
				tag = SIR
			}
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			OR = {
				tag = SIA
				tag = SIR
			}
			NOT = { has_idea = SIA_electrified_1 }
		}

		fire_only_once = yes

		days_remove = 720
		cost = 150

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 15
		}

		cancel_if_not_visible = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_Electrification"
			add_stability = 0.02
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_Electrification"
			custom_effect_tooltip = SIA_increase_state_cat_1_tt
			add_stability = 0.05
			add_ideas = SIA_electrified_1
			hidden_effect = {
				SIA = { country_event = { id = siam.56 days = 1095 } } # 3 years
				every_owned_state = {
					limit = {
						is_owned_and_controlled_by = SIA
						is_core_of = SIA
					}
					add_extra_state_shared_building_slots = 1
				}
			}
		}
	}
	SIA_Electrification_2 = {
		icon = GFX_decision_electrify

		allowed = {
			OR = {
				tag = SIA
				tag = SIR
			}
		}

		available = {
			num_of_civilian_factories_available_for_projects > 3
			has_idea = SIA_electrified_1
		}

		visible = {
			OR = {
				tag = SIA
				tag = SIR
			}
			OR = {
				date > 1940.1.1
				num_of_factories > 50
			}
			has_idea = SIA_electrified_1
			NOT = { has_idea = SIA_electrified_2 }
		}

		fire_only_once = yes

		days_remove = 720
		cost = 200

		modifier = {
			civilian_factory_use = 4
		}

		ai_will_do = {
			base = 0
			modifier = {
				factor = 10
				OR = {
					date > 1945.1.1 # Post-war
					num_of_civilian_factories_available_for_projects > 8 # Time to put these free civ fac to good use
					num_of_factories > 50 # Demand outpaces the output
				}
			}
		}

		cancel_if_not_visible = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_Electrification_2"
			add_stability = 0.03
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_Electrification_2"
			custom_effect_tooltip = SIA_increase_state_cat_1_tt
			add_stability = 0.07
			swap_ideas = { remove_idea = SIA_electrified_1 add_idea = SIA_electrified_2 }
			hidden_effect = {
				every_owned_state = {
					limit = {
						is_owned_and_controlled_by = SIA
						is_core_of = SIA
					}
					add_extra_state_shared_building_slots = 1
				}
			}
		}
	}
}

SIA_diplomatic_matters_category = {
	SIA_surrender = {
		icon = generic_break_treaty
		allowed = { original_tag = SIA }

		available = {
			has_capitulated = no
			OR = {
				enemies_strength_ratio > 2
				any_enemy_country = { is_actual_major = yes }
			}
			OR = {
				NOT = { controls_state = 289 } #Bangkok
				surrender_progress > 0.4
			}
		}

		visible = {
			has_war = yes
			is_subject = no
			has_civil_war = no
		}

		cost = 50
		days_remove = 10
		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_surrender"
			add_ideas = has_scripted_peace
			every_enemy_country = {
				limit = { is_valid_peace_target = yes }
				country_event = { id = siam.67 days = 2 }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_surrender"
			country_event = siam.70
		}
	}
}

crisis = {
	SIA_secure_bangkok = { # Appear for Rebels at CW start
		icon = GFX_decision_hand_grab
		highlight_states = {
			highlight_provinces = { 7408 }
		}

		is_good = no
		allowed = { always = no }

		available = {
			controls_province = 7408
		}

		visible = {
			has_civil_war = yes
		}

		fire_only_once = no
		selectable_mission = no
		days_mission_timeout = 14

		cancel_if_not_visible = yes
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout SIA_secure_bangkok"
			hidden_effect = {
				if = {
					limit = { NOT = { has_idea = SIA_faltering_political_movement_idea } }
					add_ideas = SIA_faltering_political_movement_idea
					SIR = {
						if = {
							limit = { has_idea = SIA_faltering_political_movement_idea }
							remove_ideas = SIA_faltering_political_movement_idea
						}
					}
				}
				subtract_from_variable = { SIA_MORAL_LEVEL = 0.01 }
				add_to_variable = { SIA_SUPCON_LEVEL  = 0.02 }
				clamp_variable = {
					var = SIA_MORAL_LEVEL
					max = -0.01
					min = -0.30
				}
				clamp_variable = {
					var = SIA_SUPCON_LEVEL
					max = 0.60
					min = 0.02
				}
				activate_mission = SIA_secure_bangkok
			}
			custom_effect_tooltip = SIA_secure_bangkok_tt
			add_war_support = -0.01
		}
	}
	SIR_secure_bangkok = { # Appear for Rebels at CW start
		icon = GFX_decision_hand_grab
		highlight_states = {
			highlight_provinces = { 7408 }
		}

		is_good = no
		allowed = { always = no }

		available = {
			controls_province = 7408
		}

		visible = {
			has_civil_war = yes
		}

		fire_only_once = no
		selectable_mission = no
		days_mission_timeout = 14

		cancel_if_not_visible = yes
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout SIR_secure_bangkok"
			hidden_effect = {
				if = {
					limit = { NOT = { has_idea = SIA_faltering_political_movement_idea } }
					add_ideas = SIA_faltering_political_movement_idea
					SIA = {
						if = {
							limit = { has_idea = SIA_faltering_political_movement_idea }
							remove_ideas = SIA_faltering_political_movement_idea
						}
					}
				}
				subtract_from_variable = { SIA_MORAL_LEVEL = 0.01 }
				add_to_variable = { SIA_SUPCON_LEVEL  = 0.02 }
				clamp_variable = {
					var = SIA_MORAL_LEVEL
					max = -0.01
					min = -0.30
				}
				clamp_variable = {
					var = SIA_SUPCON_LEVEL
					max = 0.60
					min = 0.02
				}
				activate_mission = SIR_secure_bangkok
			}
			custom_effect_tooltip = SIA_secure_bangkok_tt
			add_war_support = -0.01
		}
	}
}

SIA_integration_decisions = {
	SIA_implement_municipal_reform = {
		name = SIA_implement_municipal_reform_state
		icon = GFX_decision_generic_operation

		available = {
			has_stability > 0
			has_full_control_of_state = FROM
			FROM = {
				resistance < 30
				compliance > 30
				any_neighbor_state = {
					is_owned_and_controlled_by = ROOT
					is_core_of = ROOT
				}
			}
		}

		visible = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				NOT = { has_state_flag = SIA_municipal_reform_implemented }
			}
		}

		cost = 25
		days_remove = 30
		fire_only_once = no
		cancel_if_not_visible = yes
		on_map_mode = map_and_decisions_view

		state_target = yes
		targets = { 72 670 749 750 751 756 825 826 830 831 882 999 } # All Valid Integration Target
		target_trigger = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				NOT = { has_state_flag = SIA_municipal_reform_implemented }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled SIA_implement_municipal_reform target: [From.GetName]"
			add_political_power = 25
			add_stability = 0.02
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_implement_municipal_reform target: [From.GetName]"
			add_stability = -0.03
			FROM = {
				add_resistance = 10
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_implement_municipal_reform target: [From.GetName]"
			add_stability = 0.02
			FROM = {
				set_state_flag = SIA_municipal_reform_implemented
				if = {
					limit = { has_resistance = yes }
					add_compliance = 3
				}
			}
		}

		ai_will_do = {
			factor = 100
		}
	}
	SIA_implement_legal_reform = {
		name = SIA_implement_legal_reform_state
		icon = GFX_decision_scales

		available = {
			has_stability > 0
			has_full_control_of_state = FROM
			FROM = {
				resistance < 20
				compliance > 50
				any_neighbor_state = {
					is_owned_and_controlled_by = ROOT
					is_core_of = ROOT
				}
			}
		}

		visible = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				has_state_flag = SIA_municipal_reform_implemented
				NOT = { has_state_flag = SIA_legal_reform_implemented }
			}
		}

		cost = 25
		days_remove = 60
		fire_only_once = no
		cancel_if_not_visible = yes
		on_map_mode = map_and_decisions_view

		state_target = yes
		targets = { 72 670 749 750 751 756 825 826 830 831 882 999 } # All Valid Integration Target
		target_trigger = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				NOT = { has_state_flag = SIA_legal_reform_implemented }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled SIA_implement_legal_reform target: [From.GetName]"
			add_political_power = 25
			add_stability = 0.02
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_implement_legal_reform target: [From.GetName]"
			add_stability = -0.03
			FROM = {
				add_resistance = 15
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_implement_legal_reform target: [From.GetName]"
			add_stability = 0.02
			FROM = {
				set_state_flag = SIA_legal_reform_implemented
				if = {
					limit = { has_resistance = yes }
					add_resistance = -5
					add_compliance = 3
				}
			}
		}

		ai_will_do = {
			factor = 100
		}
	}
	SIA_civil_service_expansion_reform = {
		name = SIA_civil_service_expansion_state
		icon = GFX_decision_eng_trade_unions_support

		available = {
			has_equipment = {
				infantry_equipment > 250
			}
			has_equipment = {
				support_equipment > 50
			}
			has_stability > 0
			has_full_control_of_state = FROM
			FROM = {
				resistance < 10
				compliance > 70
				any_neighbor_state = {
					is_owned_and_controlled_by = ROOT
					is_core_of = ROOT
				}
			}
		}

		visible = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				has_state_flag = SIA_municipal_reform_implemented
				has_state_flag = SIA_legal_reform_implemented
				NOT = { has_state_flag = SIA_civil_service_expansion_implemented }
			}
		}

		cost = 25
		days_remove = 90
		fire_only_once = no
		cancel_if_not_visible = yes
		on_map_mode = map_and_decisions_view

		state_target = yes
		targets = { 72 670 749 750 751 756 825 826 830 831 882 999 } # All Valid Integration Target
		target_trigger = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				NOT = { has_state_flag = SIA_civil_service_expansion_implemented }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled SIA_civil_service_expansion_reform target: [From.GetName]"
			add_political_power = 25
			add_stability = 0.02
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = -200
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_civil_service_expansion_reform target: [From.GetName]"
			add_stability = -0.03
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = -250
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = -50
			}
			FROM = {
				add_resistance = 20
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_civil_service_expansion_reform target: [From.GetName]"
			add_stability = 0.02
			FROM = {
				set_state_flag = SIA_civil_service_expansion_implemented
				if = {
					limit = { has_resistance = yes }
					add_resistance = -5
					add_compliance = 5
				}
			}
		}

		ai_will_do = {
			factor = 100
		}
	}
	SIA_integrate_state_small = {
		name = SIA_integrate_state
		icon = eng_trade_unions_demand

		available = {
			has_stability > 0
			has_full_control_of_state = FROM
			FROM = {
				resistance < 5
				compliance > 80
				any_neighbor_state = {
					is_owned_and_controlled_by = ROOT
					is_core_of = ROOT
				}
			}
		}

		visible = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				NOT = { is_core_of = ROOT }
				has_state_flag = SIA_municipal_reform_implemented
				has_state_flag = SIA_legal_reform_implemented
				has_state_flag = SIA_civil_service_expansion_implemented
			}
		}

		cost = 25
		days_remove = 90
		fire_only_once = no
		cancel_if_not_visible = yes
		on_map_mode = map_and_decisions_view

		state_target = yes
		targets = { 830 882 }
		target_trigger = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				NOT = { is_core_of = ROOT }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled SIA_integrate_state_small target: [From.GetName]"
			add_political_power = 25
			add_stability = 0.02
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_integrate_state_small target: [From.GetName]"
			add_stability = -0.02
			FROM = {
				if = {
					limit = { has_resistance = yes }
					add_resistance = 20 # Last wave of resistance
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_integrate_state_small target: [From.GetName]"
			add_stability = 0.01
			FROM = {
				if = {
					limit = { is_claimed_by = ROOT }
					remove_claim_by = ROOT
				}
				add_core_of = ROOT
			}
		}

		ai_will_do = {
			factor = 100
		}
	}
	SIA_integrate_state_medium = {
		name = SIA_integrate_state
		icon = eng_trade_unions_demand

		available = {
			has_stability > 0
			has_full_control_of_state = FROM
			FROM = {
				resistance < 5
				compliance > 80
				any_neighbor_state = {
					is_owned_and_controlled_by = ROOT
					is_core_of = ROOT
				}
			}
		}

		visible = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				NOT = { is_core_of = ROOT }
				has_state_flag = SIA_municipal_reform_implemented
				has_state_flag = SIA_legal_reform_implemented
				has_state_flag = SIA_civil_service_expansion_implemented
			}
		}

		cost = 50
		days_remove = 90
		fire_only_once = no
		cancel_if_not_visible = yes
		on_map_mode = map_and_decisions_view

		state_target = yes
		targets = { 751 756 825 999 }
		target_trigger = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				NOT = { is_core_of = ROOT }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled SIA_integrate_state_medium target: [From.GetName]"
			add_political_power = 50
			add_stability = 0.04
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_integrate_state_medium target: [From.GetName]"
			add_stability = -0.04
			FROM = {
				if = {
					limit = { has_resistance = yes }
					add_resistance = 20 # Last wave of resistance
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_integrate_state_medium target: [From.GetName]"
			add_stability = 0.02
			FROM = {
				if = {
					limit = { is_claimed_by = ROOT }
					remove_claim_by = ROOT
				}
				add_core_of = ROOT
			}
		}

		ai_will_do = {
			factor = 100
		}
	}
	SIA_integrate_state_large = {
		name = SIA_integrate_state
		icon = eng_trade_unions_demand

		available = {
			has_stability > 0
			has_full_control_of_state = FROM
			FROM = {
				resistance < 5
				compliance > 80
				any_neighbor_state = {
					is_owned_and_controlled_by = ROOT
					is_core_of = ROOT
				}
			}
		}

		visible = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				NOT = { is_core_of = ROOT }
				has_state_flag = SIA_municipal_reform_implemented
				has_state_flag = SIA_legal_reform_implemented
				has_state_flag = SIA_civil_service_expansion_implemented
			}
		}

		cost = 100
		days_remove = 120
		fire_only_once = no
		cancel_if_not_visible = yes
		on_map_mode = map_and_decisions_view

		state_target = yes
		targets = { 72 670 749 750 826 831 }
		target_trigger = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				NOT = { is_core_of = ROOT }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled SIA_integrate_state_large target: [From.GetName]"
			add_political_power = 100
			add_stability = 0.06
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SIA_integrate_state_large target: [From.GetName]"
			add_stability = -0.06
			FROM = {
				if = {
					limit = { has_resistance = yes }
					add_resistance = 40 # Last wave of resistance
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIA_integrate_state_large target: [From.GetName]"
			add_stability = 0.03
			FROM = {
				if = {
					limit = { is_claimed_by = ROOT }
					remove_claim_by = ROOT
				}
				add_core_of = ROOT
			}
		}

		ai_will_do = {
			factor = 100
		}
	}
}

