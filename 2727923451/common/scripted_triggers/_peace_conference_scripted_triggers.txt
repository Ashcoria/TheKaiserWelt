### in state scope
is_important_state = {
	OR = {
		state = 118 #Gibraltar
		state = 753 #Suez Canal
		state = 685 #Panama Canal
		state = 773 #Bosphorous
		state = 116 #Malta
		state = 336 #Singapore
	}
}

is_paired_impassable_state = {
	OR = {
		state = 273 #Fezzan
		state = 514 #Sahara
		state = 678 #Rub Al Khali
		state = 683 #New Quebec
		state = 860 #Malian Desert
		state = 862 #Darfur Desert
		state = 910 #Niger Desert
		state = 911 #Borkou-Ennedi
		state = 926 #Sermersuaq
		state = 967 #Mauritanian Desert
		state = 1009 #Kufra
		state = 1011 #Nubian Desert
		state = 1030 #Western Amazonas
		state = 1031 #Northern Amazonas
		state = 1033 #Southern Amazonas
		state = 1036 #Bolivar Jungle
		state = 1037 #East Guyana Jungle
		state = 1038 #Suriname Jungle
		state = 1039 #West Guyana Jungle
		state = 1040 #Acre Jungle
		state = 1079 #Mabaruma Jungle
		state = 1086 #Changtang
	}
}

is_ambition_area_of_ROOT = {
	OR = {
		has_variable = ambition_area_@ROOT
		AND = {
			ROOT = {
				is_actual_major = yes
				OR = {
					tag = GER
					tag = CAN
					tag = GBR
					tag = NFA
					tag = FRA
					tag = JAP
				}
			}
			is_important_state = yes
		}
	}
}

is_ambition_area_of_PREV = {
	OR = {
		has_variable = ambition_area_@PREV
		AND = {
			PREV = {
				is_actual_major = yes
				OR = {
					tag = GER
					tag = CAN
					tag = GBR
					tag = NFA
					tag = FRA
					tag = JAP
				}
			}
			is_important_state = yes
		}
	}
}

is_claim_or_core_or_ambition_of_ROOT = {
	OR = {
		is_claimed_by = ROOT
		is_core_of = ROOT
		is_ambition_area_of_ROOT = yes
	}
}

is_claim_or_core_or_ambition_of_PREV = {
	OR = {
		is_claimed_by = PREV
		is_core_of = PREV
		is_ambition_area_of_PREV = yes
	}
}

is_owned_or_claimed_by_ROOT = {
	OR = {
		has_claimed_state_in_peace_conference = ROOT
		is_owned_by = ROOT
	}
}

is_owned_or_claimed_by_PREV = {
	OR = {
		has_claimed_state_in_peace_conference = PREV
		is_owned_by = PREV
	}
}

is_owned_or_claimed_by_PREVPREV = {
	OR = {
		has_claimed_state_in_peace_conference = PREV.PREV
		is_owned_by = PREV.PREV
	}
}

is_adjacent_to_ROOT_or_coastal = {
	OR = {
		any_neighbor_state = {
			is_owned_or_claimed_by_ROOT = yes
			is_impassable_to_PREV = no
		}
		AND = {
			is_coastal = yes
			ROOT = {
				any_owned_state = { is_coastal = yes }
			}
		}
	}
}

is_adjacent_to_PREV_or_coastal = {
	OR = {
		any_neighbor_state = {
			is_owned_or_claimed_by_PREVPREV = yes
			is_impassable_to_PREV = no
		}
		AND = {
			is_coastal = yes
			PREV = {
				any_owned_state = { is_coastal = yes }
			}
		}
	}
}

state_same_continent_as_state_FROM = {
	OR = {
		AND = {
			OR = {
				is_on_continent = asia
				is_on_continent = india
			}
			var:global.eval_state = {
				OR = {
					is_on_continent = asia
					is_on_continent = india
				}
			}
		}
		AND = {
			is_on_continent = europe
			var:global.eval_state = { is_on_continent = europe }
		}
		AND = {
			is_on_continent = africa
			var:global.eval_state = { is_on_continent = africa }
		}
		AND = {
			OR = {
				is_on_continent = north_america
				is_on_continent = central_america
			}
			var:global.eval_state = {
				OR = {
					is_on_continent = north_america
					is_on_continent = central_america
				}
			}
		}
		AND = {
			is_on_continent = south_america
			var:global.eval_state = { is_on_continent = south_america }
		}
		AND = {
			is_on_continent = middle_east
			var:global.eval_state = { is_on_continent = middle_east }
		}
		AND = {
			is_on_continent = australia
			var:global.eval_state = { is_on_continent = australia }
		}
	}
}

is_impassable_to_PREV = {
	check_variable = { impassable_to_@PREV = 1 }
}

### in country scope
build_peace_conference_temp_array = {
	all_enemy_country = {
		if = {
			limit = { is_in_peace_conference = yes }
			all_enemy_country = {
				if = {
					limit = {
						is_in_peace_conference = yes
						NOT = { has_variable = is_in_conference@THIS }
					}
					set_temp_variable = { is_in_conference@THIS = 1 }
					add_to_temp_array = { global.conference = THIS }
				}
			}
		}
	}
}

at_conference_has_war_with_owner = {
	AND = {
		is_in_peace_conference = yes
		any_enemy_country = {
			var:global.eval_state = { is_owned_by = PREV }
		}
	}
}

at_conference_has_war_with_ROOT = {
	AND = {
		is_in_peace_conference = yes
		has_war_with = ROOT
	}
}

at_conference_no_war_with_ROOT = {
	AND = {
		is_in_peace_conference = yes
		NOT = { has_war_with = ROOT }
	}
}

at_conference_has_war_with_PREV = {
	AND = {
		is_in_peace_conference = yes
		has_war_with = PREV
	}
}

at_conference_no_war_with_PREV = {
	AND = {
		is_in_peace_conference = yes
		NOT = { has_war_with = PREV }
	}
}

is_in_conference_with_chinese_ally = {
	OR = {
		AND = {
			has_socialist_government = yes
			CHI = { at_conference_has_war_with_owner = yes }
		}
		AND = {
			tag = GER
			OR = {
				QIE = { at_conference_has_war_with_owner = yes }
				LEP = { at_conference_has_war_with_owner = yes }
			}
		}
		AND = {
			tag = JAP
			FNG = { at_conference_has_war_with_owner = yes }
		}
		AND = {
			tag = RUS
			has_elected_government = yes
			CHI = {
				at_conference_has_war_with_owner = yes
				OR = {
					has_government = social_liberal
					has_government = social_democrat
				}
			}
		}
		AND = {
			tag = RUS
			has_authoritarian_government = yes
			GXC = {
				at_conference_has_war_with_owner = yes
				has_government = authoritarian_democrat
			}
		}
		AND = {
			tag = RUS
			OR = {
				has_cosmetic_tag = RUS_empire
				has_country_leader = { character = RUS_pyotr_wrangel }
			}
			QIE = { at_conference_has_war_with_owner = yes }
		}
		AND = {
			has_elected_government = yes
			NOT = {
				tag = JAP
				tag = GER
				tag = RUS
			}
			GXC = {
				at_conference_has_war_with_owner = yes
				GXC_has_federalist_government = yes
			}
		}
		AND = {
			has_authoritarian_government = yes
			NOT = {
				tag = JAP
				tag = GER
				tag = RUS
			}
			QIE = {
				at_conference_has_war_with_owner = yes
				has_cosmetic_tag = QIE_ZHL
			}
		}
	}
}

ROOT_is_restriction_exception = {
	OR = {
		# is Switzerland, because Switzerland
		tag = SWI
		# Austria restricts itself if any other faction leader is present
		AND = {
			tag = AUS
			is_faction_leader = yes
			any_of_scopes = {
				array = global.conference
				NOT = { tag = ROOT }
				is_actual_major = yes
				is_faction_leader = yes
				at_conference_no_war_with_ROOT = yes
			}
		}
		# Austrian puppets restrict themselves if dividing up Austria with Hungary
		AND = {
			OR = {
				tag = CZE
				tag = CRO
			}
			AUS = { at_conference_has_war_with_ROOT = yes }
			HUN = { at_conference_no_war_with_ROOT = yes }
		}
		# Bulgaria restricts itself if dividing up Romania/Serbia with Austria/Hungary
		AND = {
			tag = BUL
			OR = {
				ROM = { at_conference_has_war_with_ROOT = yes }
				SER = { at_conference_has_war_with_ROOT = yes }
			}
			OR = {
				AUS = { at_conference_no_war_with_ROOT = yes }
				HUN = { at_conference_no_war_with_ROOT = yes }
			}
		}
		# Canada restricts itself in the ACW if USA is at the conference
		AND = {
			tag = CAN
			OR = {
				AND = {
					TEX = { at_conference_has_war_with_ROOT = yes }
					USA = { at_conference_no_war_with_ROOT = yes }
				}
				AND = {
					CSA = { at_conference_has_war_with_ROOT = yes }
					USA = { at_conference_no_war_with_ROOT = yes }
				}
			}
		}
		# Don Kuban restricts itself if dividing up ALO or Russia
		AND = {
			tag = DKB
			OR = {
				AND = {
					ALO = { at_conference_has_war_with_ROOT = yes }
					OR = {
						RUS = { at_conference_no_war_with_ROOT = yes }
						SOV = { at_conference_no_war_with_ROOT = yes }
						MON = { at_conference_no_war_with_ROOT = yes }
						TRK = { at_conference_no_war_with_ROOT = yes }
					}
				}
				AND = {
					RUS = { at_conference_has_war_with_ROOT = yes }
					OR = {
						SOV = { at_conference_no_war_with_ROOT = yes }
						JAP = { at_conference_no_war_with_ROOT = yes }
						SIB = { at_conference_no_war_with_ROOT = yes }
					}
				}
			}
		}
		# Mexico, PSA, and New England restrict themselves if dividing up the USA with CSA or AUS
		AND = {
			OR = {
				tag = MEX
				tag = NEE
				tag = PSA
			}
			USA = { at_conference_has_war_with_ROOT = yes }
			OR = {
				CSA = { at_conference_no_war_with_ROOT = yes }
				TEX = { at_conference_no_war_with_ROOT = yes }
			}
		}
		# Greece and Romania will restrict themselves if dividing up Bulgaria/Ottomans with Serbia
		AND = {
			OR = {
				tag = ROM
				tag = GRE
			}
			OR = {
				AND = {
					BUL = { at_conference_has_war_with_ROOT = yes }
					SER = { at_conference_no_war_with_ROOT = yes }
				}
				AND = {
					TUR = { at_conference_has_war_with_ROOT = yes }
					SER = { at_conference_no_war_with_ROOT = yes }
				}
			}
		}
		# Serbia will restrict itself if dividing up the Ottomans with Egypt
		AND = {
			tag = SER
			TUR = { at_conference_has_war_with_ROOT = yes }
			EGY = { at_conference_no_war_with_ROOT = yes }
		}
		# Turkey will restrict itself if dividing up Bulgaria with the Pact
		AND = {
			tag = TUR
			BUL = { at_conference_has_war_with_ROOT = yes }
			country_exists = BPL
			BPL = { at_conference_no_war_with_ROOT = yes }
		}
		# Paraguay and Uruguay will restrict themselves if Brazil or Argentina are at the conference
		AND = {
			OR = {
				tag = URG
				tag = PAR
			}
			OR = {
				BRA = { at_conference_no_war_with_ROOT = yes }
				ARG = { at_conference_no_war_with_ROOT = yes }
			}
		}
		# Paraguay will restrict itself if dividing up Argentina with FOP
		AND = {
			tag = PAR
			ARG = { at_conference_has_war_with_ROOT = yes }
			FOP = { at_conference_no_war_with_ROOT = yes }
		}
		# Arabia will restrict itself if dividing up Iran with Egypt
		AND = {
			tag = SAU
			PER = { at_conference_has_war_with_ROOT = yes }
			EGY = { at_conference_no_war_with_ROOT = yes }
		}
		# Iran will restrict itself if dividing up Arabia with Egypt
		AND = {
			tag = PER
			OR = {
				SAU = { at_conference_has_war_with_ROOT = yes }
				JBS = { at_conference_has_war_with_ROOT = yes }
			}
			EGY = { at_conference_no_war_with_ROOT = yes }
		}
		# Russia will restrict itself if dividing up many continents
		AND = {
			OR = {
				tag = RUS
				tag = SOV
			}
			OR = {
				INT = {
					at_conference_no_war_with_ROOT = yes
					OR = {
						NOT = { is_in_faction_with = ROOT }
						is_faction_leader = yes
					}
				}
				GER = { at_conference_no_war_with_ROOT = yes }
				ENT = { at_conference_no_war_with_ROOT = yes }
			}
			var:global.eval_state = {
				OR = {
					is_on_continent = africa
					is_on_continent = europe
					is_on_continent = north_america
					is_on_continent = south_america
					is_on_continent = central_america
				}
			}
		}
		# Japan will restrict itself on many continents
		AND = {
			tag = JAP
			OR = {
				INT = { at_conference_no_war_with_ROOT = yes }
				GER = { at_conference_no_war_with_ROOT = yes }
				ENT = { at_conference_no_war_with_ROOT = yes }
			}
			var:global.eval_state = {
				OR = {
					is_on_continent = africa
					is_on_continent = middle_east
					is_on_continent = europe
					is_on_continent = north_america
					is_on_continent = south_america
					is_on_continent = central_america
				}
			}
		}
		# American factions restrict themselves during the ACW
		AND = {
			is_american_tag = yes
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			OR = {
				INT = { at_conference_no_war_with_ROOT = yes }
				GER = { at_conference_no_war_with_ROOT = yes }
				ENT = { at_conference_no_war_with_ROOT = yes }
			}
		}
		# Tibet will restrict itself if dividing up Chinese tags with Mongolia
		AND = {
			tag = TIB
			MON = { at_conference_no_war_with_ROOT = yes }
			var:global.eval_state = { is_mainland_china = yes }
		}
	}
}

PREV_is_restriction_exception = {
	OR = {
		# is Switzerland, because Switzerland
		tag = SWI
		# Austria restricts itself if any other faction leader is present
		AND = {
			tag = AUS
			is_faction_leader = yes
			any_of_scopes = {
				array = global.conference
				NOT = { tag = PREV }
				is_actual_major = yes
				is_faction_leader = yes
				at_conference_no_war_with_PREV = yes
			}
		}
		# Austrian puppets restrict themselves if dividing up Austria with Hungary
		AND = {
			OR = {
				tag = CZE
				tag = CRO
				tag = GAL
			}
			AUS = { at_conference_has_war_with_PREV = yes }
			HUN = { at_conference_no_war_with_PREV = yes }
		}
		# Bulgaria restricts itself if dividing up Romania/Serbia with Austria/Hungary
		AND = {
			tag = BUL
			OR = {
				ROM = { at_conference_has_war_with_PREV = yes }
				SER = { at_conference_has_war_with_PREV = yes }
			}
			OR = {
				AUS = { at_conference_no_war_with_PREV = yes }
				HUN = { at_conference_no_war_with_PREV = yes }
			}
		}
		# Canada restricts itself in the ACW if USA is at the conference
		AND = {
			tag = CAN
			OR = {
				AND = {
					TEX = { at_conference_has_war_with_PREV = yes }
					USA = { at_conference_no_war_with_PREV = yes }
				}
				AND = {
					CSA = { at_conference_has_war_with_PREV = yes }
					USA = { at_conference_no_war_with_PREV = yes }
				}
			}
		}
		# Don Kuban restricts itself if dividing up ALO or Russia
		AND = {
			tag = DKB
			OR = {
				AND = {
					ALO = { at_conference_has_war_with_PREV = yes }
					OR = {
						RUS = { at_conference_no_war_with_PREV = yes }
						SOV = { at_conference_no_war_with_PREV = yes }
						MON = { at_conference_no_war_with_PREV = yes }
						TRK = { at_conference_no_war_with_PREV = yes }
					}
				}
				AND = {
					RUS = { at_conference_has_war_with_PREV = yes }
					OR = {
						SOV = { at_conference_no_war_with_PREV = yes }
						JAP = { at_conference_no_war_with_PREV = yes }
						SIB = { at_conference_no_war_with_PREV = yes }
					}
				}
			}
		}
		# Mexico, PSA, and New England restrict themselves if dividing up the USA with CSA or AUS
		AND = {
			OR = {
				tag = MEX
				tag = NEE
				tag = PSA
			}
			USA = { at_conference_has_war_with_PREV = yes }
			OR = {
				CSA = { at_conference_no_war_with_PREV = yes }
				TEX = { at_conference_no_war_with_PREV = yes }
			}
		}
		# Greece and Romania will restrict themselves if dividing up Bulgaria/Ottomans with Serbia
		AND = {
			OR = {
				tag = ROM
				tag = GRE
			}
			OR = {
				AND = {
					BUL = { at_conference_has_war_with_PREV = yes }
					SER = { at_conference_no_war_with_PREV = yes }
				}
				AND = {
					TUR = { at_conference_has_war_with_PREV = yes }
					SER = { at_conference_no_war_with_PREV = yes }
				}
			}
		}
		# Serbia will restrict itself if dividing up the Ottomans with Egypt
		AND = {
			tag = SER
			TUR = { at_conference_has_war_with_PREV = yes }
			EGY = { at_conference_no_war_with_PREV = yes }
		}
		# Turkey will restrict itself if dividing up Bulgaria with the Pact
		AND = {
			tag = TUR
			BUL = { at_conference_has_war_with_ROOT = yes }
			country_exists = BPL
			BPL = { at_conference_no_war_with_ROOT = yes }
		}
		# Paraguay and Uruguay will restrict themselves if Brazil or Argentina are at the conference
		AND = {
			OR = {
				tag = URG
				tag = PAR
			}
			OR = {
				BRA = { at_conference_no_war_with_PREV = yes }
				ARG = { at_conference_no_war_with_PREV = yes }
			}
		}
		# Paraguay will restrict itself if dividing up Argentina with FOP
		AND = {
			tag = PAR
			ARG = { at_conference_has_war_with_PREV = yes }
			FOP = { at_conference_no_war_with_PREV = yes }
		}
		# Arabia will restrict itself if dividing up Iran with Egypt
		AND = {
			tag = SAU
			PER = { at_conference_has_war_with_PREV = yes }
			EGY = { at_conference_no_war_with_PREV = yes }
		}
		# Iran will restrict itself if dividing up Arabia with Egypt
		AND = {
			tag = PER
			OR = {
				SAU = { at_conference_has_war_with_PREV = yes }
				JBS = { at_conference_has_war_with_PREV = yes }
			}
			EGY = { at_conference_no_war_with_ROOT = yes }
		}
		# Russia will restrict itself if dividing up many continents
		AND = {
			OR = {
				tag = RUS
				tag = SOV
			}
			OR = {
				INT = {
					at_conference_no_war_with_PREV = yes
					OR = {
						NOT = { is_in_faction_with = PREV }
						is_faction_leader = yes
					}
				}
				GER = { at_conference_no_war_with_PREV = yes }
				ENT = { at_conference_no_war_with_PREV = yes }
			}
			var:global.eval_state = {
				OR = {
					is_on_continent = africa
					is_on_continent = europe
					is_on_continent = north_america
					is_on_continent = south_america
					is_on_continent = central_america
				}
			}
		}
		# Japan will restrict itself on many continents
		AND = {
			tag = JAP
			OR = {
				INT = { at_conference_no_war_with_PREV = yes }
				GER = { at_conference_no_war_with_PREV = yes }
				ENT = { at_conference_no_war_with_PREV = yes }
			}
			var:global.eval_state = {
				OR = {
					is_on_continent = africa
					is_on_continent = middle_east
					is_on_continent = europe
					is_on_continent = north_america
					is_on_continent = south_america
					is_on_continent = central_america
				}
			}
		}
		# American factions restrict themselves during the ACW
		AND = {
			is_american_tag = yes
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			OR = {
				INT = { at_conference_no_war_with_PREV = yes }
				GER = { at_conference_no_war_with_PREV = yes }
				ENT = { at_conference_no_war_with_PREV = yes }
			}
		}
		# Tibet will restrict itself if dividing up Chinese tags with Mongolia
		AND = {
			tag = TIB
			MON = { at_conference_no_war_with_PREV = yes }
			var:global.eval_state = { is_mainland_china = yes }
		}
	}
}

restrict_territorial_ambitions_PREV = {
	OR = {
		# is a puppet
		AND = {
			is_subject = yes
			overlord = { is_in_peace_conference = yes }
		}
		# is a faction member and leader is a major and at the conference
		AND = {
			is_in_faction = yes
			is_faction_leader = no
			faction_leader = {
				is_actual_major = yes
				at_conference_no_war_with_PREV = yes
			}
		}
		# is not a major and a major is at the conference
		AND = {
			is_actual_major = no
			any_of_scopes = {
				array = global.conference
				NOT = { tag = PREV }
				is_actual_major = yes
				at_conference_has_war_with_owner = yes
			}
		}
		# is not a major and no major is at the conference, but a much stronger minor is
		AND = {
			is_actual_major = no
			NOT = {
				any_of_scopes = {
					array = global.conference
					NOT = { tag = PREV }
					is_actual_major = yes
					at_conference_has_war_with_owner = yes
				}
			}

			any_of_scopes = {
				array = global.conference
				NOT = { tag = PREV }
				is_actual_major = no
				is_subject = no
				at_conference_no_war_with_PREV = yes
				at_conference_has_war_with_owner = yes
				PREV_is_restriction_exception = no

				# country has more than 1.5 total number of factories/battalions
				set_temp_variable = { global.power_score = 0 }
				all_of_scopes = {
					array = PREV.owned_states
					add_to_temp_variable = { global.power_score = THIS.arms_factory_level }
					add_to_temp_variable = { global.power_score = THIS.industrial_complex_level }
				}
				add_to_temp_variable = { global.power_score = PREV.num_divisions }
				multiply_temp_variable = { global.power_score = 1.5 }
				all_of_scopes = {
					array = owned_states
					subtract_from_temp_variable = { global.power_score = THIS.arms_factory_level }
					subtract_from_temp_variable = { global.power_score = THIS.industrial_complex_level }
				}
				subtract_from_temp_variable = { global.power_score = num_divisions }
				check_variable = { global.power_score < 0 }
			}
		}
		# is an exception to the restriction rules
		PREV_is_restriction_exception = yes
	}
}

restrict_territorial_ambitions_ROOT = {
	OR = {
		# is a puppet
		AND = {
			is_subject = yes
			overlord = { is_in_peace_conference = yes }
		}
		# is a faction member and leader is a major and at the conference
		AND = {
			is_in_faction = yes
			is_faction_leader = no
			faction_leader = {
				is_actual_major = yes
				at_conference_no_war_with_ROOT = yes
			}
			NOT = {
				AND = {
					is_in_europe = yes
					is_actual_major = yes
					var:global.eval_state = { is_on_continent = africa }
				}
			}
		}
		# is not a major and a major is at the conference
		AND = {
			is_actual_major = no
			any_of_scopes = {
				array = global.conference
				NOT = { tag = ROOT }
				is_actual_major = yes
				at_conference_has_war_with_owner = yes
			}
		}
		# is not a major and no major is at the conference, but a much stronger minor is
		AND = {
			is_actual_major = no
			NOT = {
				any_of_scopes = {
					array = global.conference
					NOT = { tag = ROOT }
					is_actual_major = yes
					at_conference_has_war_with_owner = yes
				}
			}

			set_temp_variable = { power_score = num_of_factories }
			add_to_temp_variable = { power_score = num_divisions }

			any_of_scopes = {
				array = global.conference
				NOT = { tag = ROOT }
				is_actual_major = no
				is_subject = no
				at_conference_no_war_with_ROOT = yes
				at_conference_has_war_with_owner = yes
				PREV_is_restriction_exception = no

				# country has more than 1.5 total number of factories/battalions
				set_temp_variable = { global.power_score = 0 }
				all_of_scopes = {
					array = ROOT.owned_states
					add_to_temp_variable = { global.power_score = THIS.arms_factory_level }
					add_to_temp_variable = { global.power_score = THIS.industrial_complex_level }
				}
				add_to_temp_variable = { global.power_score = ROOT.num_divisions }
				multiply_temp_variable = { global.power_score = 1.5 }
				all_of_scopes = {
					array = owned_states
					subtract_from_temp_variable = { global.power_score = THIS.arms_factory_level }
					subtract_from_temp_variable = { global.power_score = THIS.industrial_complex_level }
				}
				subtract_from_temp_variable = { global.power_score = num_divisions }
				check_variable = { global.power_score < 0 }
			}
		}
		# is an exception to the restriction rules
		ROOT_is_restriction_exception = yes
	}
}

same_continent_as_state_FROM = {
	OR = {
		AND = {
			is_in_asia = yes
			var:global.eval_state = {
				OR = {
					is_on_continent = asia
					is_on_continent = india
				}
			}
		}
		AND = {
			is_in_europe = yes
			var:global.eval_state = { is_on_continent = europe }
		}
		AND = {
			is_in_africa = yes
			var:global.eval_state = { is_on_continent = africa }
		}
		AND = {
			is_in_north_america = yes
			var:global.eval_state = {
				OR = {
					is_on_continent = north_america
					is_on_continent = central_america
				}
			}
		}
		AND = {
			is_in_south_america = yes
			var:global.eval_state = { is_on_continent = south_america }
		}
		AND = {
			is_in_middle_east = yes
			var:global.eval_state = { is_on_continent = middle_east }
		}
		AND = {
			is_in_australia = yes
			var:global.eval_state = { is_on_continent = australia }
		}
	}
}

is_exception_to_taking_states_on_other_continents = {
	OR = {
		# European countries will always take states in Africa, Oceania, Asia, and the Middle East
		AND = {
			is_in_europe = yes
			NOT = { tag = RUS }
			NOT = { tag = SOV }
			var:global.eval_state = {
				OR = {
					is_on_continent = africa
					is_on_continent = asia
					is_on_continent = india
					is_on_continent = australia
					is_on_continent = middle_east
				}
			}
		}
		# European countries will take states in the Caribbean and Guyana
		AND = {
			is_in_europe = yes
			NOT = { tag = RUS }
			NOT = { tag = SOV }
			var:global.eval_state = {
				OR = {
					state = 690 #Northern Bahamas
					region = 53 #Caribbean
					region = 200 #Guyana Plateau
				}
			}
		}
		# Russia will always take non-island states in Asia and the Middle East
		AND = {
			OR = {
				tag = RUS
				tag = SOV
			}
			var:global.eval_state = {
				OR = {
					is_on_continent = asia
					is_on_continent = india
					is_on_continent = middle_east
				}
				is_island_region = no
			}
		}
		# Russia will take island regions in asia and oceania if it has an eastern port
		AND = {
			OR = {
				tag = RUS
				tag = SOV
			}
			any_owned_state = {
				is_coastal = yes
				OR = {
					region = 148 #Amur
					region = 191 #Korea
					is_mainland_china = yes
				}
			}
			var:global.eval_state = {
				OR = {
					is_on_continent = asia
					is_on_continent = australia
				}
				is_island_region = yes
			}
		}
		# Middle Eastern countries will take states in northern India and North Africa
		AND = {
			is_in_middle_east = yes
			var:global.eval_state = {
				OR = {
					state = 441 #Kashmir
					state = 444 #Baluchistan
					state = 443 #Sindh
					state = 445 #Quetta
					state = 442 #Peshawar
					state = 891 #Lahore
					region = 126 #Egypt
					region = 189 #Maghreb
					region = 128 #Sudan
					region = 238 #Tripolitania
					region = 17 #Horn of Africa
					state = 183 #Cyprus
					state = 862 #Darfur Desert
					state = 273 #Fizzan
					state = 1009 #Kufra
					state = 1011 #Nubian Desert
					state = 552 #Al Gharbia
					region = 134 #Caucasus
				}
			}
		}
		# Countries in Central Asia will take states in European Russia and the Middle East
		AND = {
			capital_scope = {
				OR = {
					region = 136 #Central Asia
					region = 162 #Afghanistan
				}
			}
			var:global.eval_state = {
				OR = {
					region = 137 #Western Steppe
					region = 135 #Kuban
					is_on_continent = middle_east
				}
			}
		}
		# countries in North Africa will take states in the Middle East
		AND = {
			NOT = { tag = NFA }
			capital_scope = {
				OR = {
					region = 126 #Egypt
					region = 238 #Tripolitania
					state = 273 #Fizzan
					state = 1009 #Kufra
					state = 552 #Al Gharbia
					region = 189 #Maghreb
				}
			}
			var:global.eval_state = {
				OR = {
					is_on_continent = middle_east
					state = 116 #Malta
					state = 182 #Crete
					state = 183 #Cyprus
				}
			}
		}
		# countries in India will take states in the middle east
		AND = {
			capital_scope = {
				OR = {
					region = 31 #Southern India
					region = 141 #Eastern India
					region = 153 #Central India
					region = 245 #Indus Valley
				}
			}
			var:global.eval_state = { is_on_continent = middle_east }
		}
		# Turkey/Ottomans will take states in the Balkans
		AND = {
			tag = TUR
			var:global.eval_state = {
				OR = {
					region = 15 #Romania
					region = 24 #Southern Balkans
					region = 25 #Greece
					region = 26 #Bulgaria
					region = 143 #Northern Balkans
					region = 223 #Aegean Sea
				}
			}
		}
		# Canada will always take states in Europe, N & S America if it is a faction leader
		AND = {
			tag = CAN
			is_faction_leader = yes
			var:global.eval_state = {
				OR = {
					is_on_continent = north_america
					is_on_continent = central_america
					is_on_continent = south_america
					is_on_continent = europe
				}
			}
		}
		# National France will always take cores in Europe
		AND = {
			tag = NFA
			var:global.eval_state = { is_on_continent = europe }
		}
		# American countries will always take states in S America
		AND = {
			OR = {
				tag = USA
				tag = CSA
				tag = TEX
				tag = PSA
			}
			var:global.eval_state = {
				OR = {
					is_on_continent = south_america
					is_on_continent = central_america
				}
			}
		}
		# Japan and countries in SE Asia will take states in oceania
		AND = {
			capital_scope = {
				OR = {
					region = 154 #Home Islands
					is_southeast_asia = yes
				}
			}
			var:global.eval_state = { is_on_continent = australia }
		}
		# Countries in Oceania will take states in SE Asia
		AND = {
			is_in_australia = yes
			var:global.eval_state = { is_southeast_asia = yes }
		}
		# Spanish countries will take states in South and Central America
		AND = {
			OR = {
				tag = SPA
				tag = SWF
				tag = SPR
			}
			var:global.eval_state = {
				OR = {
					is_on_continent = south_america
					is_on_continent = central_america
				}
			}
		}
		# Portugal will take states in Brazil
		AND = {
			tag = POR
			var:global.eval_state = { is_core_of = BRA }
		}
	}
}

can_reach_state = {
	set_temp_variable = { global.taker = THIS.id }

	#check every state owned by the country being annexed
	var:global.eval_state = {
		owner = {
			all_owned_state = {
				if = {
					limit = {
						#which are not already in the array
						NOT = { is_in_array = { global.canreach = THIS } }
						#and are not already claimed
						NOT = {
							any_of_scopes = {
								array = global.conference
								PREV = { has_claimed_state_in_peace_conference = PREV }
							}
						}
						#any states which are claimed/cores/ambitions (meaning they will be taken)
						OR = {
							is_claimed_by = var:global.taker
							is_core_of = var:global.taker
							AND = {
								has_variable = ambition_area_@PREV.PREV.PREV
								NOT = {
									any_of_scopes = {
										array = global.conference
										NOT = { tag = var:global.taker }
										PREV = { is_claim_or_core_of_PREV = yes }
										has_war_with = PREV.PREV
										is_subject = no
										is_in_faction_with = var:global.taker
									}
								}
							}
						}
						#and either neighboring or coastal (for non-landlocked countries)
						#or they are next to a state already in the array
						OR = {
							AND = {
								is_coastal = yes
								var:global.taker = {
									any_owned_state = { is_coastal = yes }
								}
							}
							any_neighbor_state = {
								is_impassable_to_PREV = no
								OR = {
									is_in_array = { global.canreach = THIS }
									is_owned_by = var:global.taker
									has_claimed_state_in_peace_conference = var:global.taker
								}
							}
						}
					}
					#add them all to the global array
					add_to_temp_array = { global.canreach = THIS }
				}
			}
		}
	}

	#then check if there are any more states that now fit this criteria
	if = {
		limit = {
			var:global.eval_state = {
				owner = {
					any_owned_state = {
						#which are not already in the array
						NOT = { is_in_array = { global.canreach = THIS } }
						#and are not already claimed
						NOT = {
							any_of_scopes = {
								array = global.conference
								PREV = { has_claimed_state_in_peace_conference = PREV }
							}
						}
						#any states which are claimed/cores/ambitions (meaning they will be taken)
						OR = {
							is_claimed_by = var:global.taker
							is_core_of = var:global.taker
							AND = {
								has_variable = ambition_area_@PREV.PREV.PREV
								NOT = {
									any_of_scopes = {
										array = global.conference
										NOT = { tag = var:global.taker }
										PREV = { is_claim_or_core_of_PREV = yes }
										has_war_with = PREV.PREV
										is_subject = no
										is_in_faction_with = var:global.taker
									}
								}
							}
						}
						#and either neighboring or coastal (for non-landlocked countries)
						#or they are next to a state already in the array
						OR = {
							AND = {
								is_coastal = yes
								var:global.taker = {
									any_owned_state = { is_coastal = yes }
								}
							}
							any_neighbor_state = {
								is_impassable_to_PREV = no
								OR = {
									is_in_array = { global.canreach = THIS }
									is_owned_by = var:global.taker
									has_claimed_state_in_peace_conference = var:global.taker
								}
							}
						}
					}
				}
			}
		}
		#then start this trigger over
		can_reach_state = yes
	}
	#otherwise check to see if FROM is in the array (meaning it can be reached by contiguous states)
	else = {
		is_in_array = { global.canreach = var:global.eval_state }
		clear_temp_array = global.canreach
	}
}

can_reach_state_direct = {
	set_temp_variable = { global.taker = THIS.id }

	#check every state owned by the country being annexed
	var:global.eval_state = {
		owner = {
			all_owned_state = {
				if = {
					limit = {
						#which are not already in the array
						NOT = { is_in_array = { global.canreach = THIS } }
						#and are not already claimed
						NOT = {
							any_of_scopes = {
								array = global.conference
								PREV = { has_claimed_state_in_peace_conference = PREV }
							}
						}
						#any states which are claimed/cores/ambitions (meaning they will be taken)
						OR = {
							is_claimed_by = var:global.taker
							is_core_of = var:global.taker
							AND = {
								has_variable = ambition_area_@PREV.PREV.PREV
								NOT = {
									any_of_scopes = {
										array = global.conference
										NOT = { tag = var:global.taker }
										PREV = { is_claim_or_core_of_PREV = yes }
										has_war_with = PREV.PREV
										is_subject = no
										is_in_faction_with = var:global.taker
									}
								}
							}
						}
						#and either neighboring or they are next to a state already in the array
						any_neighbor_state = {
							is_impassable_to_PREV = no
							OR = {
								is_in_array = { global.canreach = THIS }
								is_owned_by = var:global.taker
								has_claimed_state_in_peace_conference = var:global.taker
							}
						}
					}
					#add them all to the global array
					add_to_temp_array = { global.canreach = THIS }
				}
			}
		}
	}

	#then check if there are any more states that now fit this criteria
	if = {
		limit = {
			var:global.eval_state = {
				owner = {
					any_owned_state = {
						#which are not already in the array
						NOT = { is_in_array = { global.canreach = THIS } }
						#and are not already claimed
						NOT = {
							any_of_scopes = {
								array = global.conference
								PREV = { has_claimed_state_in_peace_conference = PREV }
							}
						}
						#any states which are claimed/cores/ambitions (meaning they will be taken)
						OR = {
							is_claimed_by = var:global.taker
							is_core_of = var:global.taker
							AND = {
								has_variable = ambition_area_@PREV.PREV.PREV
								NOT = {
									any_of_scopes = {
										array = global.conference
										NOT = { tag = var:global.taker }
										PREV = { is_claim_or_core_of_PREV = yes }
										has_war_with = PREV.PREV
										is_subject = no
										is_in_faction_with = var:global.taker
									}
								}
							}
						}
						#and either neighboring or they are next to a state already in the array
						any_neighbor_state = {
							is_impassable_to_PREV = no
							OR = {
								is_in_array = { global.canreach = THIS }
								is_owned_by = var:global.taker
								has_claimed_state_in_peace_conference = var:global.taker
							}
						}
					}
				}
			}
		}
		#then start this trigger over
		can_reach_state_direct = yes
	}
	#otherwise check to see if FROM is in the array (meaning it can be reached by contiguous states)
	else = {
		is_in_array = { global.canreach = var:global.eval_state }
		clear_temp_array = global.canreach
	}
}


### conference rules
is_willing_to_take_state_ROOT = {
	# general rules
	rule_puppets_only_get_leftovers_ROOT = no
	rule_dont_take_ally_claims_ROOT = no
	rule_dont_take_ally_ambitions_ROOT = no
	rule_dont_take_friend_claims_ROOT = no
	rule_is_restricted_ROOT = no
	rule_needs_connection_ROOT = no
	rule_claims_needs_connection_ROOT = no
	rule_look_for_direct_connection_ROOT = no
	rule_dont_take_land_other_continents_ROOT = no
	rule_dont_take_cheap_island_states_ROOT = no
	rule_dont_take_impassable_states_ROOT = no

	# country-specific rules
	rule_dont_take_france_from_GER_NFA_ally_ROOT = no
	rule_GER_split_up_france_ROOT = no
	rule_NFA_split_up_france_ROOT = no
	rule_stay_out_of_france_ROOT = no
	rule_stay_out_of_britain_ROOT = no
	rule_stay_out_of_scotland_ROOT = no
	rule_stay_out_of_wales_ROOT = no
	rule_stay_out_of_north_england_ROOT = no
	rule_stay_out_of_england_ROOT = no
	rule_leave_ireland_to_britain_ROOT = no
	rule_GER_stay_out_of_balkans_ROOT = no
	rule_CAN_only_neighboring_american_ROOT = no
	rule_CAN_Minnesota_check_ROOT = no
	rule_CAN_Idaho_check_ROOT = no
	rule_CAN_Ohio_check_ROOT = no
	rule_CAN_Illinois_check_ROOT = no
	rule_CAN_Indiana_check_ROOT = no
	rule_stay_out_of_america_ROOT = no
	rule_stay_out_of_alands_ROOT = no
	rule_HND_stay_out_of_siam_ROOT = no
	rule_let_KUR_take_cores_ROOT = no
	rule_SQI_split_up_LEP_ROOT = no
	rule_ANQ_split_up_LEP_ROOT = no
	rule_CHI_split_up_LEP_ROOT = no
	rule_POR_stay_out_of_spain_ROOT = no
	rule_leave_UKR_to_RUS_ROOT = no
	rule_stay_out_of_western_russia_ROOT = no
	rule_stay_out_of_siberia_ROOT = no
	rule_RUS_stay_out_of_west_europe_ROOT = no
	rule_RUS_stay_out_of_spain_ROOT = no
	rule_RUS_stay_out_of_italy_ROOT = no
	rule_RUS_stay_out_of_ireland_ROOT = no
	rule_RUS_stay_out_of_SE_asia_ROOT = no
	rule_TRM_border_only_ROOT = no
	rule_JAP_leave_russian_coast_to_TRM_ROOT = no
	rule_AUS_stay_out_of_northern_germany_ROOT = no
	rule_AUS_stay_out_of_eastern_germany_ROOT = no
	rule_stay_out_of_eastern_germany_ROOT = no
	rule_stay_out_of_southern_germany_ROOT = no
	rule_TUR_stay_out_of_northern_europe_ROOT = no
	rule_leave_italy_to_italy_ROOT = no
	rule_leave_america_to_americans_ROOT = no
	rule_leave_india_to_india_ROOT = no
	rule_3I_stay_out_of_asia_ROOT = no
	rule_Cernauti_neighbor_ROOT = no
	rule_no_Jutland_without_Sjaelland_ROOT = no
	rule_leave_INS_to_DEI_ROOT = no
	rule_AUS_split_hungary_with_belgrade_pact_ROOT = no
	rule_belgrade_pact_split_hungary_with_austria_ROOT = no
}

is_willing_to_take_state_PREV = {
	# general rules
	rule_puppets_only_get_leftovers_PREV = no
	rule_dont_take_ally_claims_PREV = no
	rule_dont_take_ally_ambitions_PREV = no
	rule_dont_take_friend_claims_PREV = no
	rule_is_restricted_PREV = no
	rule_dont_take_land_other_continents_PREV = no
	rule_dont_take_cheap_island_states_PREV = no
	rule_dont_take_impassable_states_PREV = no

	# country-specific rules
	rule_dont_take_france_from_GER_NFA_ally_PREV = no
	rule_GER_split_up_france_PREV = no
	rule_NFA_split_up_france_PREV = no
	rule_stay_out_of_france_PREV = no
	rule_stay_out_of_britain_PREV = no
	rule_stay_out_of_scotland_PREV = no
	rule_stay_out_of_wales_PREV = no
	rule_stay_out_of_north_england_PREV = no
	rule_stay_out_of_england_PREV = no
	rule_leave_ireland_to_britain_PREV = no
	rule_GER_stay_out_of_balkans_PREV = no
	rule_CAN_Minnesota_check_PREV = no
	rule_CAN_Idaho_check_PREV = no
	rule_CAN_Ohio_check_PREV = no
	rule_CAN_Illinois_check_PREV = no
	rule_CAN_Indiana_check_PREV = no
	rule_stay_out_of_america_PREV = no
	rule_stay_out_of_alands_PREV = no
	rule_HND_stay_out_of_siam_PREV = no
	rule_let_KUR_take_cores_PREV = no
	rule_SQI_split_up_LEP_PREV = no
	rule_ANQ_split_up_LEP_PREV = no
	rule_CHI_split_up_LEP_PREV = no
	rule_POR_stay_out_of_spain_PREV = no
	rule_leave_UKR_to_RUS_PREV = no
	rule_stay_out_of_western_russia_PREV = no
	rule_stay_out_of_siberia_PREV = no
	rule_RUS_stay_out_of_west_europe_PREV = no
	rule_RUS_stay_out_of_spain_PREV = no
	rule_RUS_stay_out_of_italy_PREV = no
	rule_RUS_stay_out_of_ireland_PREV = no
	rule_RUS_stay_out_of_SE_asia_PREV = no
	rule_TRM_border_only_PREV = no
	rule_JAP_leave_russian_coast_to_TRM_PREV = no
	rule_AUS_stay_out_of_northern_germany_PREV = no
	rule_AUS_stay_out_of_eastern_germany_PREV = no
	rule_stay_out_of_eastern_germany_PREV = no
	rule_stay_out_of_southern_germany_PREV = no
	rule_TUR_stay_out_of_northern_europe_PREV = no
	rule_leave_italy_to_italy_PREV = no
	rule_leave_america_to_americans_PREV = no
	rule_leave_india_to_india_PREV = no
	rule_3I_stay_out_of_asia_PREV = no
	rule_Cernauti_neighbor_PREV = no
	rule_no_Jutland_without_Sjaelland_PREV = no
	rule_leave_INS_to_DEI_PREV = no
	rule_AUS_split_hungary_with_belgrade_pact_PREV = no
	rule_belgrade_pact_split_hungary_with_austria_PREV = no
}


# general rules
rule_take_bordering_first = {
	FROM = {
		is_important_state = no
		NOT = {
			any_neighbor_state = {
				is_owned_or_claimed_by_ROOT = yes
				is_impassable_to_PREV = no
			}
		}
		owner = {
			any_owned_state = {
				any_neighbor_state = {
					is_owned_or_claimed_by_ROOT = yes
					is_impassable_to_PREV = no
				}
				set_temp_variable = { global.eval_state = THIS.id }
				NOT = {
					owner = {
						any_enemy_country = {
							var:global.eval_state = {
								OR = {
									has_claimed_state_in_peace_conference = PREV
									is_controlled_by = PREV
								}
							}
						}
					}
				}
				ROOT = { is_willing_to_take_state_ROOT = yes }
			}
		}
	}
}

rule_puppets_only_get_leftovers_ROOT = {
	is_subject = yes
	var:global.eval_state = { is_claim_or_core_of_ROOT = no }
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		is_subject = no
		at_conference_has_war_with_owner = yes
		var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		is_willing_to_take_state_PREV = yes
	}
}

rule_puppets_only_get_leftovers_PREV = {
	is_subject = yes
	var:global.eval_state = { is_claim_or_core_of_PREV = no }
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		is_subject = no
		at_conference_has_war_with_owner = yes
		var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
	}
}

rule_dont_take_ally_claims_ROOT = {
	var:global.eval_state = { is_claim_or_core_of_ROOT = no }
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		var:global.eval_state = { is_claim_or_core_of_PREV = yes }
		at_conference_has_war_with_owner = yes
		OR = {
			is_in_faction_with = ROOT
			is_subject_of = ROOT
			ROOT = { is_subject_of = PREV }
		}
		is_willing_to_take_state_PREV = yes
		can_reach_state = yes

		# Exception: Japan taking China
		NOT = {
			AND = {
				ROOT = { tag = JAP }
				var:global.eval_state = {
					is_china_claim_of_JAP = yes
					has_variable = ambition_area_@ROOT
				}
			}
		}
	}
}

rule_dont_take_ally_claims_PREV = {
	var:global.eval_state = { is_claim_or_core_of_PREV = no }
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		var:global.eval_state = { is_claim_or_core_of_PREV = yes }
		at_conference_has_war_with_owner = yes
		OR = {
			is_in_faction_with = PREV
			is_subject_of = PREV
			PREV = { is_subject_of = PREV }
		}

		# Exception: Japan taking China
		NOT = {
			AND = {
				PREV = { tag = JAP }
				var:global.eval_state = {
					is_china_claim_of_JAP = yes
					has_variable = ambition_area_@JAP
				}
			}
		}
	}
}

rule_dont_take_ally_ambitions_ROOT = {
	is_in_faction = yes
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_ROOT = no
		is_important_state = no
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		is_ai = yes
		is_in_faction_with = ROOT
		at_conference_has_war_with_owner = yes
		NOT = { has_war_with = ROOT }
		var:global.eval_state = {
			is_claim_or_core_of_PREV = no
			is_ambition_area_of_PREV = yes
		}
		is_willing_to_take_state_PREV = yes
		if = {
			limit = {
				var:global.eval_state = { is_island_region = yes }
			}
			can_reach_state = yes
		}
		else = {
			can_reach_state_direct = yes
		}


		# exception: Germany & NFA will still take lands in France
		NOT = {
			AND = {
				var:global.eval_state = { is_european_france = yes }
				ROOT = {
					OR = {
						tag = GER
						tag = NFA
					}
				}
			}
		}
		# exception: GEX and faction leaders will still take lands in Germany
		NOT = {
			AND = {
				var:global.eval_state = { is_full_germany = yes }
				ROOT = {
					OR = {
						tag = GEX
						tag = RUS
						tag = FRA
						tag = ENG
						is_faction_leader = yes
					}
				}
			}
		}
		# exception: Canada will still take states in the ACW
		NOT = {
			AND = {
				OR = {
					tag = NEE
					tag = PSA
				}
				ROOT = { tag = CAN }
				var:global.eval_state = {
					OR = {
						state = 463 #Alaska
						state = 685 #Panama Canal
						is_mainland_america = yes
					}
				}
				OR = {
					TEX = { at_conference_no_war_with_ROOT = yes }
					CSA = { at_conference_no_war_with_ROOT = yes }
					PSA = { at_conference_no_war_with_ROOT = yes }
				}
			}
		}
	}
}

rule_dont_take_ally_ambitions_PREV = {
	is_in_faction = yes
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_PREV = no
		is_important_state = no
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		is_ai = yes
		is_in_faction_with = PREV
		at_conference_has_war_with_owner = yes
		var:global.eval_state = {
			is_claim_or_core_of_PREV = no
			is_ambition_area_of_PREV = yes
		}

		# exception: Germany & NFA will still take lands in France
		NOT = {
			AND = {
				var:global.eval_state = { is_european_france = yes }
				PREV = {
					OR = {
						tag = GER
						tag = NFA
					}
				}
			}
		}
		# exception: GEX and faction leaders will still take lands in Germany
		NOT = {
			AND = {
				var:global.eval_state = { is_full_germany = yes }
				PREV = {
					OR = {
						tag = GEX
						tag = RUS
						tag = FRA
						tag = ENG
						is_faction_leader = yes
					}
				}
			}
		}
		# exception: Canada will still take states in the ACW
		NOT = {
			AND = {
				OR = {
					tag = NEE
					tag = PSA
				}
				PREV = { tag = CAN }
				var:global.eval_state = {
					OR = {
						state = 463 #Alaska
						state = 685 #Panama Canal
						is_mainland_america = yes
					}
				}
				OR = {
					TEX = { at_conference_no_war_with_PREV = yes }
					CSA = { at_conference_no_war_with_PREV = yes }
					PSA = { at_conference_no_war_with_PREV = yes }
				}
			}
		}
	}
}

rule_dont_take_friend_claims_ROOT = {
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_ROOT = no
		is_important_state = no
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		at_conference_has_war_with_owner = yes
		NOT = { has_war_with = ROOT }
		var:global.eval_state = { is_claim_or_core_of_PREV = yes }
		ROOT = { has_opinion = { target = PREV value > 0 } }
		is_willing_to_take_state_PREV = yes
		if = {
			limit = {
				var:global.eval_state = {
					OR = {
						is_island_region = yes
						is_core_of = PREV
					}
				}
			}
			can_reach_state = yes
		}
		else = {
			can_reach_state_direct = yes
		}

		# Exception: major nation who will take Chinese territory
		NOT = {
			AND = {
				is_in_conference_with_chinese_ally = no
				var:global.eval_state = { is_mainland_china = yes }
			}
		}
	}
}

rule_dont_take_friend_claims_PREV = {
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_PREV = no
		is_important_state = no
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		at_conference_has_war_with_owner = yes
		NOT = { has_war_with = PREV }
		var:global.eval_state = { is_claim_or_core_of_PREV = yes }
		PREV = { has_opinion = { target = PREV value > 0 } }
		if = {
			limit = {
				var:global.eval_state = {
					OR = {
						is_island_region = yes
						is_core_of = PREV
					}
				}
			}
			can_reach_state = yes
		}
		else = {
			can_reach_state_direct = yes
		}

		# Exception: major nation who will take Chinese territory
		NOT = {
			AND = {
				is_in_conference_with_chinese_ally = no
				var:global.eval_state = { is_mainland_china = yes }
			}
		}
	}
}

rule_is_restricted_ROOT = {
	restrict_territorial_ambitions_ROOT = yes
	var:global.eval_state = {
		impassable = no
		is_claim_or_core_or_ambition_of_ROOT = no
	}
}

rule_is_restricted_PREV = {
	restrict_territorial_ambitions_PREV = yes
	var:global.eval_state = {
		impassable = no
		is_claim_or_core_or_ambition_of_PREV = no
	}
}

rule_needs_connection_ROOT = {
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_ROOT = no
		is_adjacent_to_ROOT_or_coastal = no
	}
	# exception: we're unrestricted and there's nobody else who can and will take it
	NOT = {
		AND = {
			restrict_territorial_ambitions_ROOT = no
			NOT = {
				any_of_scopes = {
					array = global.conference
					NOT = { tag = ROOT }
					at_conference_has_war_with_owner = yes
					OR = {
						AND = {
							var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
							can_reach_state = yes
						}
						AND = {
							restrict_territorial_ambitions_PREV = no
							var:global.eval_state = { is_adjacent_to_PREV_or_coastal = yes }
						}
					}
					is_willing_to_take_state_PREV = yes
				}
			}
		}
	}
}

rule_claims_needs_connection_ROOT = {
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_ROOT = yes
		is_important_state = no
	}
	can_reach_state = no
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			AND = {
				var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
				can_reach_state = yes
			}
			restrict_territorial_ambitions_PREV = no
		}
		is_willing_to_take_state_PREV = yes
	}

	# exception: this is France, for NFA
	NOT = {
		AND = {
			tag = NFA
			var:global.eval_state = {
				is_coastal = yes
				is_european_france = yes
			}
		}
	}

	# exception: this is GER, for many countries
	NOT = {
		AND = {
			OR = {
				tag = GBR
				tag = ENG
				tag = NFA
				tag = CAN
				tag = RUS
				tag = SOV
				is_german_tag = yes
			}
			var:global.eval_state = { is_full_germany = yes }
		}
	}
}

rule_look_for_direct_connection_ROOT = {
	# don't take a state that isn't bordering or next to a claimed state
	var:global.eval_state = {
		NOT = {
			any_neighbor_state = {
				is_owned_or_claimed_by_ROOT = yes
				is_impassable_to_PREV = no
			}
			# unless it's an important state, an island, or a coastal state in an island region (like Britain)
			is_important_state = yes
			AND = {
				is_island_region = yes
				is_coastal = yes
			}
		}
	}
	# when there's another country who can and will take that state through a direct connection
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
			restrict_territorial_ambitions_PREV = no
		}
		is_willing_to_take_state_PREV = yes
		can_reach_state_direct = yes
	}
	# exception: this is France, for NFA
	NOT = {
		AND = {
			tag = NFA
			var:global.eval_state = {
				is_coastal = yes
				is_european_france = yes
			}
		}
	}
	# exception: this is GER, for many countries
	NOT = {
		AND = {
			OR = {
				tag = GBR
				tag = ENG
				tag = NFA
				tag = CAN
				tag = RUS
				tag = SOV
			}
			var:global.eval_state = { is_full_germany = yes }
		}
	}
	# exception: this is JAP in Asia
	NOT = {
		AND = {
			tag = JAP
			var:global.eval_state = { is_on_continent = asia }
		}
	}
	# exception: this is eastern Europe, for GER
	NOT = {
		AND = {
			tag = GER
			var:global.eval_state = {
				OR = {
					region = 37 #Baltic States
					region = 39 #White Ruthenia
					region = 130 #Western Ukraine
					region = 165 #Eastern Ukraine
				}
			}
		}
	}
	# exception: this is America, for ACW
	NOT = {
		AND = {
			is_american_tag = yes
			var:global.eval_state = { is_mainland_america = yes }
		}
	}
}

rule_dont_take_land_other_continents_ROOT = {
	same_continent_as_state_FROM = no
	var:global.eval_state = { is_claim_or_core_or_ambition_of_ROOT = no }
	is_exception_to_taking_states_on_other_continents = no
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			same_continent_as_state_FROM = yes
			is_exception_to_taking_states_on_other_continents = yes
			AND = {
				restrict_territorial_ambitions_PREV = no
				ROOT = { restrict_territorial_ambitions_ROOT = yes }
			}
		}
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		# exceptions: look for states the other country won't take, even if they can
		is_willing_to_take_state_PREV = yes
	}
}

rule_dont_take_land_other_continents_PREV = {
	same_continent_as_state_FROM = no
	var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = no }
	is_exception_to_taking_states_on_other_continents = no
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		at_conference_has_war_with_owner = yes
		OR = {
			same_continent_as_state_FROM = yes
			is_exception_to_taking_states_on_other_continents = yes
			AND = {
				restrict_territorial_ambitions_PREV = no
				PREV = { restrict_territorial_ambitions_PREV = yes }
			}
		}
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
	}
}

rule_dont_take_cheap_island_states_ROOT = {
	NOT = {
		tag = GER
		tag = GBR
		tag = NFA
		tag = JAP
		AND = {
			tag = CAN
			is_faction_leader = yes
		}
		num_of_naval_factories > 24
	}
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_ROOT = no
		is_actual_island_state = yes
		NOT = {
			#these are island states but they're not cheap
			state = 1 #Corsica
			state = 100 #Iceland
			state = 331 #Newfoundland
			state = 422 #Ceylon
			state = 543 #Madagascar
			state = 629 #Hawaii

			is_controlled_by = ROOT
			controller = { is_in_faction_with = ROOT }
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		at_conference_has_war_with_owner = yes
		NOT = { is_in_faction_with = ROOT }
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		OR = {
			tag = GER
			tag = GBR
			tag = NFA
			tag = JAP
			AND = {
				tag = CAN
				is_faction_leader = yes
			}
			controls_state = var:global.eval_state
			num_of_naval_factories > 24
		}
		# exceptions: look for states the other country won't take, even if they can
		is_willing_to_take_state_PREV = yes
	}
}

rule_dont_take_cheap_island_states_PREV = {
	NOT = {
		tag = GER
		tag = GBR
		tag = NFA
		tag = JAP
		AND = {
			tag = CAN
			is_faction_leader = yes
		}
		num_of_naval_factories > 24
	}
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_PREV = no
		is_actual_island_state = yes
		NOT = {
			#these are island states but they're not cheap
			state = 1 #Corsica
			state = 100 #Iceland
			state = 331 #Newfoundland
			state = 422 #Ceylon
			state = 543 #Madagascar
			state = 629 #Hawaii

			is_controlled_by = PREV
			controller = { is_in_faction_with = PREV.PREV }
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		at_conference_has_war_with_owner = yes
		NOT = { is_in_faction_with = PREV }
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		OR = {
			tag = GER
			tag = GBR
			tag = NFA
			tag = JAP
			AND = {
				tag = CAN
				is_faction_leader = yes
			}
			controls_state = var:global.eval_state
			num_of_naval_factories > 24
		}
		# exceptions: look for states the other country won't take, even if they can
		#is_willing_to_take_state_PREV = yes
	}
}

rule_dont_take_impassable_states_ROOT = {
	var:global.eval_state = {
		impassable = yes
		is_claim_or_core_or_ambition_of_ROOT = no
		# the owner of the impassable state also owns a non-impassable neighboring state
		OR = {
			any_neighbor_state = {
				impassable = no
				owner = { owns_state = PREV.PREV }
			}
			NOT = {
				any_neighbor_state = {
					impassable = no
				}
			}
		}
		# no neighboring state is owned or claimed
		NOT = {
			any_neighbor_state = {
				is_owned_or_claimed_by_ROOT = yes
				# check for impassable states which must be paired with a regular state
				OR = {
					AND = {
						state = 322 #Tibet
						PREV = { state = 1086 } #Changtang
					}
					AND = {
						state = 1078 #Mabaruma
						PREV = { state = 1079 } #Mabaruma Jungle
					}
					AND = {
						state = 855 #Acre
						PREV = { state = 1040 } #Acre Jungle
					}
					AND = {
						state = 687 #West Guyana
						PREV = { state = 1039 } #West Guyana Jungle
					}
					AND = {
						state = 309 #Suriname
						PREV = { state = 1038 } #Suriname Jungle
					}
					AND = {
						state = 310 #East Guyana
						PREV = { state = 1037 } #East Guyana Jungle
					}
					AND = {
						state = 912 #Bolivar
						PREV = { state = 1036 } #Bolivar Jungle
					}
					AND = {
						state = 898 #Para
						PREV = { state = 1033 } #Southern Amazonas
					}
					AND = {
						state = 495 #Amazonas
						PREV = { state = 1031 } #Northern Amazonas
					}
					AND = {
						state = 495 #Amazonas
						PREV = { state = 1030 } #Western Amazonas
					}
					AND = {
						state = 663 #Jaghbub
						PREV = { state = 1009 } #Kufra
					}
					AND = {
						state = 557 #Mauritania
						PREV = { state = 967 } #Mauritanian Desert
					}
					AND = {
						state = 101 #Coastal Greenland
						PREV = { state = 926 } #Humboldt Glacier
					}
					AND = {
						state = 515 #Chad
						PREV = { state = 911 } #Borkou-Ennedi
					}
					AND = {
						state = 809 #Niger
						PREV = { state = 910 } #Niger Desert
					}
					AND = {
						state = 1007 #Nubia
						PREV = { state = 1011 } #Nubian Desert
					}
					AND = {
						state = 1010 #Darfur
						PREV = { state = 862 } #Darfur Desert
					}
					AND = {
						state = 556 #French Sudan
						PREV = { state = 860 } #Malian Desert
					}
					AND = {
						state = 292 #Nejd
						PREV = { state = 678 } #Rub Al Khali
					}
					AND = {
						state = 466 #Quebec
						PREV = { state = 683 } #New Quebec
					}
					AND = {
						state = 513 #Southern Territories
						PREV = { state = 514 } #Sahara
					}
					AND = {
						state = 448 #Tripoli
						PREV = { state = 273 } #Fezzan
					}
					PREV = {
						is_paired_impassable_state = no
					}
				}
			}
		}
	}
}

rule_dont_take_impassable_states_PREV = {
	var:global.eval_state = {
		impassable = yes
		is_claim_or_core_or_ambition_of_PREV = no
		# the owner of the impassable state also owns a non-impassable neighboring state
		OR = {
			any_neighbor_state = {
				impassable = no
				owner = { owns_state = PREV.PREV }
			}
			NOT = {
				any_neighbor_state = {
					impassable = no
				}
			}
		}
		# no neighboring state is owned or claimed
		NOT = {
			any_neighbor_state = {
				is_owned_or_claimed_by_PREVPREV = yes
				# check for impassable states which must be paired with a regular state
				OR = {
					AND = {
						state = 322 #Tibet
						PREV = { state = 1086 } #Changtang
					}
					AND = {
						state = 1078 #Mabaruma
						PREV = { state = 1079 } #Mabaruma Jungle
					}
					AND = {
						state = 855 #Acre
						PREV = { state = 1040 } #Acre Jungle
					}
					AND = {
						state = 687 #West Guyana
						PREV = { state = 1039 } #West Guyana Jungle
					}
					AND = {
						state = 309 #Suriname
						PREV = { state = 1038 } #Suriname Jungle
					}
					AND = {
						state = 310 #East Guyana
						PREV = { state = 1037 } #East Guyana Jungle
					}
					AND = {
						state = 912 #Bolivar
						PREV = { state = 1036 } #Bolivar Jungle
					}
					AND = {
						state = 898 #Para
						PREV = { state = 1033 } #Southern Amazonas
					}
					AND = {
						state = 495 #Amazonas
						PREV = { state = 1031 } #Northern Amazonas
					}
					AND = {
						state = 495 #Amazonas
						PREV = { state = 1030 } #Western Amazonas
					}
					AND = {
						state = 663 #Jaghbub
						PREV = { state = 1009 } #Kufra
					}
					AND = {
						state = 557 #Mauritania
						PREV = { state = 967 } #Mauritanian Desert
					}
					AND = {
						state = 101 #Coastal Greenland
						PREV = { state = 926 } #Humboldt Glacier
					}
					AND = {
						state = 515 #Chad
						PREV = { state = 911 } #Borkou-Ennedi
					}
					AND = {
						state = 809 #Niger
						PREV = { state = 910 } #Niger Desert
					}
					AND = {
						state = 1007 #Nubia
						PREV = { state = 1011 } #Nubian Desert
					}
					AND = {
						state = 1010 #Darfur
						PREV = { state = 862 } #Darfur Desert
					}
					AND = {
						state = 556 #French Sudan
						PREV = { state = 860 } #Malian Desert
					}
					AND = {
						state = 292 #Nejd
						PREV = { state = 678 } #Rub Al Khali
					}
					AND = {
						state = 466 #Quebec
						PREV = { state = 683 } #New Quebec
					}
					AND = {
						state = 513 #Southern Territories
						PREV = { state = 514 } #Sahara
					}
					AND = {
						state = 448 #Tripoli
						PREV = { state = 273 } #Fezzan
					}
					PREV = {
						is_paired_impassable_state = no
					}
				}
			}
		}
	}
}


# country_specific rules
rule_dont_take_france_from_GER_NFA_ally_ROOT = {
	var:global.eval_state = {
		is_european_france = yes
		is_claim_or_core_or_ambition_of_ROOT = no
	}
	OR = {
		GER = {
			is_in_faction_with = ROOT
			at_conference_has_war_with_owner = yes
			is_willing_to_take_state_PREV = yes
		}
		NFA = {
			is_in_faction_with = ROOT
			at_conference_has_war_with_owner = yes
			is_willing_to_take_state_PREV = yes
		}
	}
}

rule_dont_take_france_from_GER_NFA_ally_PREV = {
	var:global.eval_state = {
		is_european_france = yes
		is_claim_or_core_or_ambition_of_PREV = no
	}
	OR = {
		GER = {
			is_in_faction_with = PREV
			at_conference_has_war_with_owner = yes
			#is_willing_to_take_state_PREV = yes
		}
		NFA = {
			is_in_faction_with = PREV
			at_conference_has_war_with_owner = yes
			#is_willing_to_take_state_PREV = yes
		}
	}
}

rule_GER_split_up_france_ROOT = {
	tag = GER
	FRA = { at_conference_has_war_with_ROOT = yes }
	NFA = {
		at_conference_no_war_with_ROOT = yes
		NOT = { is_in_faction_with = ROOT }
	}
	NOT = { has_global_flag = GER_stay_out_france_uk }
	var:global.eval_state = {
		is_owned_by = FRA
		is_core_of = FRA
		region = 20 #Southern France
		NOT = {
			AND = {
				is_controlled_by_ROOT_or_ally = yes
				any_neighbor_state = { is_owned_or_claimed_by_ROOT = yes }
			}
			AND = {
				is_controlled_by_ROOT_or_ally = no
				NOT = { controller = { is_in_faction_with = NFA } }
				any_neighbor_state = { is_owned_or_claimed_by_ROOT = yes }
			}
		}
	}
}

rule_GER_split_up_france_PREV = {
	tag = GER
	FRA = { at_conference_has_war_with_PREV = yes }
	NFA = {
		at_conference_no_war_with_PREV = yes
		NOT = { is_in_faction_with = GER }
	}
	NOT = { has_global_flag = GER_stay_out_france_uk }
	var:global.eval_state = {
		is_owned_by = FRA
		is_core_of = FRA
		region = 20 #Southern France
		NOT = {
			AND = {
				GER = { is_ally_with = PREV.controller }
				any_neighbor_state = {
					OR = {
						has_claimed_state_in_peace_conference = GER
						is_owned_by = GER
					}
				}
			}
			AND = {
				NOT = { GER = { is_ally_with = PREV.controller } }
				NOT = { controller = { is_in_faction_with = NFA } }
				any_neighbor_state = {
					OR = {
						has_claimed_state_in_peace_conference = GER
						is_owned_by = GER
					}
				}
			}
		}
	}
}

rule_NFA_split_up_france_ROOT = {
	tag = NFA
	FRA = { at_conference_has_war_with_ROOT = yes }
	GER = {
		at_conference_no_war_with_ROOT = yes
		restrict_territorial_ambitions_PREV = no
		NOT = { is_in_faction_with = NFA }
	}
	NOT = { has_global_flag = GER_stay_out_france_uk }
	var:global.eval_state = {
		is_owned_by = FRA
		is_core_of = FRA
		OR = {
			region = 19 #Northern France
			region = 164 #Western France
		}
		NOT = {
			AND = {
				is_controlled_by_ROOT_or_ally = yes
				OR = {
					any_neighbor_state = { is_owned_or_claimed_by_ROOT = yes }
					is_coastal = yes
				}
			}
			AND = {
				is_controlled_by_ROOT_or_ally = no
				NOT = { controller = { is_in_faction_with = GER } }
				any_neighbor_state = { is_owned_or_claimed_by_ROOT = yes }
			}
		}
	}
}

rule_NFA_split_up_france_PREV = {
	tag = NFA
	FRA = { at_conference_has_war_with_PREV = yes }
	GER = {
		at_conference_no_war_with_PREV = yes
		restrict_territorial_ambitions_PREV = no
		NOT = { is_in_faction_with = NFA }
	}
	NOT = { has_global_flag = GER_stay_out_france_uk }
	var:global.eval_state = {
		is_owned_by = FRA
		is_core_of = FRA
		OR = {
			region = 19 #Northern France
			region = 164 #Western France
		}
		NOT = {
			AND = {
				NFA = { is_ally_with = PREV.controller }
				OR = {
					any_neighbor_state = {
						OR = {
							has_claimed_state_in_peace_conference = NFA
							is_owned_by = NFA
						}
					}
					is_coastal = yes
				}
			}
			AND = {
				NOT = { NFA = { is_ally_with = var:PREV.controller } }
				NOT = { controller = { is_in_faction_with = GER } }
				any_neighbor_state = {
					OR = {
						has_claimed_state_in_peace_conference = NFA
						is_owned_by = NFA
					}
				}
			}
		}
	}
}

rule_stay_out_of_france_ROOT = {
	NOT = {
		tag = GER
		tag = NFA
	}
	restrict_territorial_ambitions_ROOT = no
	FRA = { at_conference_has_war_with_ROOT = yes }
	var:global.eval_state = {
		is_owned_by = FRA
		is_claim_or_core_or_ambition_of_ROOT = no
		is_european_france = yes
	}
	OR = {
		AND = {
			NOT = { has_global_flag = GER_stay_out_france_uk }
			GER = {
				at_conference_no_war_with_ROOT = yes
				at_conference_has_war_with_owner = yes
				is_willing_to_take_state_PREV = yes
			}
		}
		NFA = {
			at_conference_no_war_with_ROOT = yes
			at_conference_has_war_with_owner = yes
			is_willing_to_take_state_PREV = yes
		}
	}
}

rule_stay_out_of_france_PREV = {
	NOT = {
		tag = GER
		tag = NFA
	}
	restrict_territorial_ambitions_PREV = no
	FRA = { at_conference_has_war_with_PREV = yes }
	var:global.eval_state = {
		is_owned_by = FRA
		is_claim_or_core_or_ambition_of_PREV = no
		is_european_france = yes
	}
	OR = {
		AND = {
			NOT = { has_global_flag = GER_stay_out_france_uk }
			GER = {
				at_conference_no_war_with_PREV = yes
				at_conference_has_war_with_owner = yes
				#is_willing_to_take_state_PREV = yes
			}
		}
		NFA = {
			at_conference_no_war_with_PREV = yes
			at_conference_has_war_with_owner = yes
			#is_willing_to_take_state_PREV = yes
		}
	}
}

rule_stay_out_of_britain_ROOT = {
	NOT = {
		tag = GER
		tag = RUS
		tag = CAN
	}
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_ROOT = no
		is_british_isles = yes
	}
	OR = {
		AND = {
			NOT = { has_global_flag = GER_stay_out_france_uk }
			GER = {
				at_conference_has_war_with_owner = yes
				at_conference_no_war_with_ROOT = yes
				is_willing_to_take_state_PREV = yes
			}
		}
		RUS = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_ROOT = yes
			is_willing_to_take_state_PREV = yes
		}
		CAN = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_ROOT = yes
			is_willing_to_take_state_PREV = yes
		}
	}
}

rule_stay_out_of_britain_PREV = {
	NOT = {
		tag = GER
		tag = RUS
		tag = CAN
	}
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_PREV = no
		is_british_isles = yes
	}
	OR = {
		AND = {
			NOT = { has_global_flag = GER_stay_out_france_uk }
			GER = {
				at_conference_has_war_with_owner = yes
				at_conference_no_war_with_PREV = yes
				is_willing_to_take_state_PREV = yes
			}
		}
		RUS = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_PREV = yes
			restrict_territorial_ambitions_PREV = no
		}
		CAN = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_PREV = yes
			restrict_territorial_ambitions_PREV = no
		}
	}
}

rule_stay_out_of_scotland_ROOT = {
	var:global.eval_state = {
		region = 3 #Scotland
	}
	NOT = {
		controls_state = 121 #Lothian
		any_allied_country = { controls_state = 121 }
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		NOT = { is_in_faction_with = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		OR = {
			controls_state = 121 #Lothian
			any_allied_country = { controls_state = 121 }
		}
		is_willing_to_take_state_PREV = yes
	}
}

rule_stay_out_of_scotland_PREV = {
	var:global.eval_state = {
		region = 3 #Scotland
	}
	NOT = {
		controls_state = 121 #Lothian
		any_allied_country = { controls_state = 121 }
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		NOT = { is_in_faction_with = PREV }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		OR = {
			controls_state = 121 #Lothian
			any_allied_country = { controls_state = 121 }
		}
		#is_willing_to_take_state_PREV = yes
	}
}

rule_stay_out_of_wales_ROOT = {
	var:global.eval_state = {
		OR = {
			state = 122 #South Wales
			state = 957 #North Wales
		}
	}
	NOT = {
		controls_state = 122 #South Wales
		any_allied_country = { controls_state = 122 }
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		NOT = { is_in_faction_with = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		OR = {
			controls_state = 122 #South Wales
			any_allied_country = { controls_state = 122 }
		}
		is_willing_to_take_state_PREV = yes
	}
}

rule_stay_out_of_wales_PREV = {
	var:global.eval_state = {
		OR = {
			state = 122 #South Wales
			state = 957 #North Wales
		}
	}
	NOT = {
		controls_state = 122 #South Wales
		any_allied_country = { controls_state = 122 }
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		NOT = { is_in_faction_with = PREV }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		OR = {
			controls_state = 122 #South Wales
			any_allied_country = { controls_state = 122 }
		}
		#is_willing_to_take_state_PREV = yes
	}
}

rule_stay_out_of_north_england_ROOT = {
	var:global.eval_state = {
		state = 131 #North England
	}
	NOT = {
		controls_state = 126 #London
		any_allied_country = { controls_state = 126 }
		controls_state = 121 #Lothian
		any_allied_country = { controls_state = 121 }
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		NOT = { is_in_faction_with = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		OR = {
			controls_state = 126 #London
			any_allied_country = { controls_state = 126 }
			controls_state = 121 #Lothian
			any_allied_country = { controls_state = 121 }
		}
		is_willing_to_take_state_PREV = yes
	}
}

rule_stay_out_of_north_england_PREV = {
	var:global.eval_state = {
		state = 131 #Northern England
	}
	NOT = {
		controls_state = 126 #London
		any_allied_country = { controls_state = 126 }
		controls_state = 121 #Lothian
		any_allied_country = { controls_state = 121 }
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		NOT = { is_in_faction_with = PREV }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		OR = {
			controls_state = 126 #London
			any_allied_country = { controls_state = 126 }
			controls_state = 121 #Lothian
			any_allied_country = { controls_state = 121 }
		}
		#is_willing_to_take_state_PREV = yes
	}
}

rule_stay_out_of_england_ROOT = {
	var:global.eval_state = {
		OR = {
			region = 1 #Southern England
			region = 2 #Northern England
		}
		NOT = { state = 131 } #North England
	}
	NOT = {
		controls_state = 126 #London
		any_allied_country = { controls_state = 126 }
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		NOT = { is_in_faction_with = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		OR = {
			controls_state = 126 #London
			any_allied_country = { controls_state = 126 }
		}
		is_willing_to_take_state_PREV = yes
	}
}

rule_stay_out_of_england_PREV = {
	var:global.eval_state = {
		OR = {
			region = 1 #Southern England
			region = 2 #Northern England
		}
		NOT = { state = 131 } #North England
	}
	NOT = {
		controls_state = 126 #London
		any_allied_country = { controls_state = 126 }
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		NOT = { is_in_faction_with = PREV }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		OR = {
			controls_state = 126 #London
			any_allied_country = { controls_state = 126 }
		}
		#is_willing_to_take_state_PREV = yes
	}
}

rule_leave_ireland_to_britain_ROOT = {
	NOT = {
		tag = ENG
		tag = GBR
		AND = {
			tag = CAN
			is_faction_leader = yes
			NOT = { country_exists = GBR }
		}
	}
	var:global.eval_state = {
		region = 4 #Ireland
		is_claim_or_core_or_ambition_of_ROOT = no
	}
	OR = {
		ENG = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_ROOT = yes
			is_willing_to_take_state_PREV = yes
		}
		GBR = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_ROOT = yes
			is_willing_to_take_state_PREV = yes
		}
		CAN = {
			is_faction_leader = yes
			NOT = { country_exists = GBR }
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_ROOT = yes
			is_willing_to_take_state_PREV = yes
		}
	}
}

rule_leave_ireland_to_britain_PREV = {
	NOT = {
		tag = ENG
		tag = GBR
		AND = {
			tag = CAN
			is_faction_leader = yes
			NOT = { country_exists = GBR }
		}
	}
	var:global.eval_state = {
		region = 4 #Ireland
		is_claim_or_core_or_ambition_of_PREV = no
	}
	OR = {
		ENG = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_PREV = yes
			#is_willing_to_take_state_PREV = yes
		}
		GBR = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_PREV = yes
			#is_willing_to_take_state_PREV = yes
		}
		CAN = {
			is_faction_leader = yes
			NOT = { country_exists = GBR }
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_PREV = yes
			#is_willing_to_take_state_PREV = yes
		}
	}
}

rule_GER_stay_out_of_balkans_ROOT = {
	OR = {
		tag = GER
		tag = GEX
	}
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_ROOT = no
		OR = {
			region = 15 #Romania
			region = 24 #Southern Balkans
			region = 25 #Greece
			region = 26 #Bulgaria
			region = 143 #Northern Balkans
			region = 223 #Aegean Sea
		}
	}
	AUS = {
		at_conference_no_war_with_ROOT = yes
		at_conference_has_war_with_owner = yes
		is_faction_leader = yes
		is_willing_to_take_state_PREV = yes
	}
}

rule_GER_stay_out_of_balkans_PREV = {
	OR = {
		tag = GER
		tag = GEX
	}
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_PREV = no
		OR = {
			region = 15 #Romania
			region = 24 #Southern Balkans
			region = 25 #Greece
			region = 26 #Bulgaria
			region = 143 #Northern Balkans
			region = 223 #Aegean Sea
		}
	}
	AUS = {
		at_conference_no_war_with_PREV = yes
		at_conference_has_war_with_owner = yes
		is_faction_leader = yes
		#is_willing_to_take_state_PREV = yes
	}
}

rule_CAN_only_neighboring_american_ROOT = {
	tag = CAN
	var:global.eval_state = {
		is_mainland_america = yes
		is_actual_island_state = no
	}
	ROOT_is_restriction_exception = no
	can_reach_state_direct = no
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		is_american_tag = yes
		at_conference_no_war_with_ROOT = yes
		at_conference_has_war_with_owner = yes
		is_willing_to_take_state_PREV = yes
		can_reach_state = yes
	}
}

rule_CAN_Minnesota_check_ROOT = {
	tag = CAN
	var:global.eval_state = { state = 391 } #Minnesota
	NOT = {
		394 = { is_owned_or_claimed_by_ROOT = yes } #Wisconsin
		AND = {
			389 = { is_owned_or_claimed_by_ROOT = yes } #North Dakota
			390 = { is_owned_or_claimed_by_ROOT = yes } #South Dakota
		}
	}
}

rule_CAN_Minnesota_check_PREV = {
	tag = CAN
	var:global.eval_state = { state = 391 } #Minnesota
	NOT = {
		394 = { is_owned_or_claimed_by_PREV = yes } #Wisconsin
		AND = {
			389 = { is_owned_or_claimed_by_PREV = yes } #North Dakota
			390 = { is_owned_or_claimed_by_PREV = yes } #South Dakota
		}
	}
}

rule_CAN_Idaho_check_ROOT = {
	tag = CAN
	var:global.eval_state = { state = 387 } #Idaho
	NOT = {
		388 = { is_owned_or_claimed_by_ROOT = yes } #Montana
		AND = {
			386 = { is_owned_or_claimed_by_ROOT = yes } #Washington
			385 = { is_owned_or_claimed_by_ROOT = yes } #Oregon
		}
	}
}

rule_CAN_Idaho_check_PREV = {
	tag = CAN
	var:global.eval_state = { state = 387 } #Idaho
	NOT = {
		388 = { is_owned_or_claimed_by_PREV = yes } #Montana
		AND = {
			386 = { is_owned_or_claimed_by_PREV = yes } #Washington
			385 = { is_owned_or_claimed_by_PREV = yes } #Oregon
		}
	}
}

rule_CAN_Ohio_check_ROOT = {
	tag = CAN
	var:global.eval_state = { state = 261 } #Ohio
	NOT = {
		393 = { is_owned_or_claimed_by_ROOT = yes } #Michigan
		975 = { is_owned_or_claimed_by_ROOT = yes } #Pittsburgh
	}
}

rule_CAN_Ohio_check_PREV = {
	tag = CAN
	var:global.eval_state = { state = 261 } #Ohio
	NOT = {
		393 = { is_owned_or_claimed_by_PREV = yes } #Michigan
		975 = { is_owned_or_claimed_by_PREV = yes } #Pittsburgh
	}
}

rule_CAN_Illinois_check_ROOT = {
	tag = CAN
	var:global.eval_state = { state = 395 } #Illinois
	NOT = {
		396 = { is_owned_or_claimed_by_ROOT = yes } #Indiana
		394 = { is_owned_or_claimed_by_ROOT = yes } #Wisconsin
	}
}

rule_CAN_Illinois_check_PREV = {
	tag = CAN
	var:global.eval_state = { state = 395 } #Illinois
	NOT = {
		396 = { is_owned_or_claimed_by_PREV = yes } #Indiana
		394 = { is_owned_or_claimed_by_PREV = yes } #Wisconsin
	}
}

rule_CAN_Indiana_check_ROOT = {
	tag = CAN
	var:global.eval_state = { state = 396 } #Indiana
	NOT = {
		395 = { is_owned_or_claimed_by_ROOT = yes } #Illinois
		AND = {
			393 = { is_owned_or_claimed_by_ROOT = yes } #Michigan
			261 = { is_owned_or_claimed_by_ROOT = yes } #Ohio
		}
	}
}

rule_CAN_Indiana_check_PREV = {
	tag = CAN
	var:global.eval_state = { state = 396 } #Indiana
	NOT = {
		395 = { is_owned_or_claimed_by_PREV = yes } #Illinois
		AND = {
			393 = { is_owned_or_claimed_by_PREV = yes } #Michigan
			261 = { is_owned_or_claimed_by_PREV = yes } #Ohio
		}
	}
}

rule_stay_out_of_america_ROOT = {
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_ROOT = no
		OR = {
			is_mainland_america = yes
			state = 463 #Alaska
			state = 629 #Hawaii
			state = 685 #Panama Canal
			state = 686 #Puerto Rico
		}
	}
	has_socialist_government = yes
	CSA = {
		at_conference_no_war_with_ROOT = yes
		at_conference_has_war_with_owner = yes
		is_willing_to_take_state_PREV = yes
	}
}

rule_stay_out_of_america_PREV = {
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_PREV = no
		OR = {
			is_mainland_america = yes
			state = 463 #Alaska
			state = 629 #Hawaii
			state = 685 #Panama Canal
			state = 686 #Puerto Rico
		}
	}
	has_socialist_government = yes
	CSA = {
		at_conference_no_war_with_PREV = yes
		at_conference_has_war_with_owner = yes
		#is_willing_to_take_state_PREV = yes
	}
}

rule_stay_out_of_alands_ROOT = {
	var:global.eval_state = {
		state = 145 #Aland
		is_claim_or_core_or_ambition_of_ROOT = no
	}
	NOT = {
		tag = RUS
		tag = SOV
		tag = FIN
		tag = SWE
		tag = SCA
	}
	any_of_scopes = {
		array = global.conference
		OR = {
			tag = RUS
			tag = SOV
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		at_conference_no_war_with_ROOT = yes
		at_conference_has_war_with_owner = yes
		is_willing_to_take_state_PREV = yes
	}
}

rule_stay_out_of_alands_PREV = {
	var:global.eval_state = {
		state = 145 #Aland
		is_claim_or_core_or_ambition_of_PREV = no
	}
	NOT = {
		tag = RUS
		tag = SOV
		tag = FIN
		tag = SWE
		tag = SCA
	}
	any_of_scopes = {
		array = global.conference
		OR = {
			tag = RUS
			tag = SOV
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		at_conference_no_war_with_PREV = yes
		at_conference_has_war_with_owner = yes
		#is_willing_to_take_state_PREV = yes
	}
}

rule_HND_stay_out_of_siam_ROOT = {
	tag = HND
	SIA = { at_conference_has_war_with_ROOT = yes }
	var:global.eval_state = {
		is_core_of = SIA
		NOT = {
			num_owned_neighbour_states = { count > 0 owner = ROOT }
			num_claimed_peace_conference_neighbour_states = { count > 0 owner = ROOT }
		}
	}
	BRM = {
		at_conference_no_war_with_ROOT = yes
		is_willing_to_take_state_PREV = yes
	}
}

rule_HND_stay_out_of_siam_PREV = {
	tag = HND
	SIA = { at_conference_has_war_with_PREV = yes }
	var:global.eval_state = {
		is_core_of = SIA
		NOT = {
			num_owned_neighbour_states = { count > 0 owner = PREV }
			num_claimed_peace_conference_neighbour_states = { count > 0 owner = PREV }
		}
	}
	BRM = {
		at_conference_no_war_with_PREV = yes
		is_willing_to_take_state_PREV = yes
	}
}

rule_let_KUR_take_cores_ROOT = {
	OR = {
		tag = SAU
		tag = JBS
	}
	KUR = { at_conference_no_war_with_ROOT = yes }
	var:global.eval_state = {
		is_core_of = KUR
		OR = {
			state = 676 #Al Mawsli
			state = 819 #Kirkuk
		}
	}
}

rule_let_KUR_take_cores_PREV = {
	OR = {
		tag = SAU
		tag = JBS
	}
	KUR = { at_conference_no_war_with_PREV = yes }
	var:global.eval_state = {
		is_core_of = KUR
		OR = {
			state = 676 #Al Mawsli
			state = 819 #Kirkuk
		}
	}
}

rule_SQI_split_up_LEP_ROOT = {
	OR = {
		tag = ANQ
		tag = CHI
	}
	SQI = {
		at_conference_no_war_with_ROOT = yes
		at_conference_has_war_with_owner = yes
		surrender_progress < 0.80
	}
	var:global.eval_state = {
		is_owned_by = LEP
		OR = {
			state = 1047 #Xuzhou
			state = 598 #Yangzhou
			state = 1075 #Nantong
		}
	}
}

rule_SQI_split_up_LEP_PREV = {
	OR = {
		tag = ANQ
		tag = CHI
	}
	SQI = {
		at_conference_no_war_with_ROOT = yes
		at_conference_has_war_with_owner = yes
		surrender_progress < 0.80
	}
	var:global.eval_state = {
		is_owned_by = LEP
		OR = {
			state = 1047 #Xuzhou
			state = 598 #Yangzhou
			state = 1075 #Nantong
		}
	}
}

rule_ANQ_split_up_LEP_ROOT = {
	OR = {
		tag = SQI
		tag = CHI
	}
	ANQ = {
		at_conference_no_war_with_ROOT = yes
		at_conference_has_war_with_owner = yes
		surrender_progress < 0.80
	}
	var:global.eval_state = {
		is_owned_by = LEP
		OR = {
			state = 613 #Nanjing
			state = 596 #Qiantang
			state = 1067 #Jinhua
			state = 1068 #Kuaiji
		}
	}
}

rule_ANQ_split_up_LEP_PREV = {
	OR = {
		tag = SQI
		tag = CHI
	}
	ANQ = {
		at_conference_no_war_with_ROOT = yes
		at_conference_has_war_with_owner = yes
		surrender_progress < 0.80
	}
	var:global.eval_state = {
		is_owned_by = LEP
		OR = {
			state = 613 #Nanjing
			state = 596 #Qiantang
			state = 1067 #Jinhua
			state = 1068 #Kuaiji
		}
	}
}

rule_CHI_split_up_LEP_ROOT = {
	OR = {
		tag = SQI
		tag = ANQ
	}
	CHI = {
		at_conference_no_war_with_ROOT = yes
		at_conference_has_war_with_owner = yes
		surrender_progress < 0.80
	}
	var:global.eval_state = {
		is_owned_by = LEP
		OR = {
			state = 1066 #Minhou
			state = 595 #Jianan
			state = 600 #Gannan
			state = 802 #Xiamen
		}
	}
}

rule_CHI_split_up_LEP_PREV = {
	OR = {
		tag = SQI
		tag = ANQ
	}
	CHI = {
		at_conference_no_war_with_ROOT = yes
		at_conference_has_war_with_owner = yes
		surrender_progress < 0.80
	}
	var:global.eval_state = {
		is_owned_by = LEP
		OR = {
			state = 1066 #Minhou
			state = 595 #Jianan
			state = 600 #Gannan
			state = 802 #Xiamen
		}
	}
}

rule_POR_stay_out_of_spain_ROOT = {
	tag = POR
	var:global.eval_state = {
		OR = {
			region = 41 #Eastern Iberia
			region = 236 #Southern Iberia
			region = 237 #Western Iberia
		}
		NOT = {
			is_claim_or_core_of_ROOT = yes
			state = 171 #Galicia
			state = 793 #Asturias
			state = 118 #Gibraltar
		}
	}
	OR = {
		SPA = {
			at_conference_no_war_with_ROOT = yes
			at_conference_has_war_with_owner = yes
		}
		SWF = {
			at_conference_no_war_with_ROOT = yes
			at_conference_has_war_with_owner = yes
		}
		SPR = {
			at_conference_no_war_with_ROOT = yes
			at_conference_has_war_with_owner = yes
		}
	}
}

rule_POR_stay_out_of_spain_PREV = {
	tag = POR
	var:global.eval_state = {
		OR = {
			region = 41 #Eastern Iberia
			region = 236 #Southern Iberia
			region = 237 #Western Iberia
		}
		NOT = {
			is_claim_or_core_of_PREV = yes
			state = 171 #Galicia
			state = 793 #Asturias
			state = 118 #Gibraltar
		}
	}
	OR = {
		SPA = {
			at_conference_no_war_with_PREV = yes
			at_conference_has_war_with_owner = yes
		}
		SWF = {
			at_conference_no_war_with_PREV = yes
			at_conference_has_war_with_owner = yes
		}
		SPR = {
			at_conference_no_war_with_PREV = yes
			at_conference_has_war_with_owner = yes
		}
	}
}

rule_leave_UKR_to_RUS_ROOT = {
	NOT = {
		tag = UKR
		tag = RUS
		tag = SOV
		tag = GER
		AND = {
			is_faction_leader = yes
			any_allied_country = {
				var:global.eval_state = { is_core_of = PREV }
			}
		}
	}
	var:global.eval_state = {
		OR = {
			region = 130 #Western Ukraine
			region = 165 #Eastern Ukraine
		}
		NOT = { state = 137 } #Crimea
		is_claim_or_core_or_ambition_of_ROOT = no
	}
	OR = {
		RUS = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_ROOT = yes
			is_willing_to_take_state_PREV = yes
		}
		SOV = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_ROOT = yes
			is_willing_to_take_state_PREV = yes
		}
	}
}

rule_leave_UKR_to_RUS_PREV = {
	NOT = {
		tag = UKR
		tag = RUS
		tag = SOV
		tag = GER
		AND = {
			is_faction_leader = yes
			any_allied_country = {
				var:global.eval_state = { is_core_of = PREV }
			}
		}
	}
	var:global.eval_state = {
		OR = {
			region = 130 #Western Ukraine
			region = 165 #Eastern Ukraine
		}
		NOT = { state = 137 } #Crimea
		is_claim_or_core_or_ambition_of_PREV = no
	}
	OR = {
		RUS = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_PREV = yes
			#is_willing_to_take_state_PREV = yes
		}
		SOV = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_PREV = yes
			#is_willing_to_take_state_PREV = yes
		}
	}
}

rule_stay_out_of_western_russia_ROOT = {
	OR = {
		tag = TRM
		tag = JAP
		is_chinese_tag = yes
	}
	var:global.eval_state = {
		OR = {
			region = 40 #Transvolga
			region = 132 #Northern Russia
			region = 133 #Central Russia
			region = 135 #Kuban
			region = 137 #Western Steppe
			region = 150 #Arctic Russia
			state = 213 #Murmansk
			state = 215 #Medvezhyegorsk
			state = 722 #Pechenga
			state = 880 #Dvinsk
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		OR = {
			tag = GER
			tag = FRA
			tag = UKR
			tag = DKB
			tag = WHR
			tag = LIT
			tag = LAT
			tag = EST
			tag = BAT
			tag = FIN
		}
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		is_willing_to_take_state_PREV = yes
	}
}

rule_stay_out_of_western_russia_PREV = {
	OR = {
		tag = TRM
		tag = JAP
		is_chinese_tag = yes
	}
	var:global.eval_state = {
		OR = {
			region = 40 #Transvolga
			region = 132 #Northern Russia
			region = 133 #Central Russia
			region = 135 #Kuban
			region = 137 #Western Steppe
			region = 150 #Arctic Russia
			state = 213 #Murmansk
			state = 215 #Medvezhyegorsk
			state = 722 #Pechenga
			state = 880 #Dvinsk
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		OR = {
			tag = GER
			tag = FRA
			tag = UKR
			tag = DKB
			tag = WHR
			tag = LIT
			tag = LAT
			tag = EST
			tag = BAT
			tag = FIN
		}
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
	}
}

rule_stay_out_of_siberia_ROOT = {
	OR = {
		tag = GER
		tag = FRA
		tag = UKR
		tag = DKB
		tag = WHR
		tag = LIT
		tag = LAT
		tag = EST
		tag = BAT
		tag = FIN
	}
	var:global.eval_state = {
		OR = {
			is_siberia = yes
			is_russian_far_east = yes
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		OR = {
			tag = TRM
			tag = JAP
			tag = MON
			tag = FNG
			tag = QIE
			tag = XSM
			tag = CHI
		}
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		OR = {
			is_willing_to_take_state_PREV = yes
			var:global.eval_state = { impassable = yes }
		}
	}
}

rule_stay_out_of_siberia_PREV = {
	OR = {
		tag = GER
		tag = FRA
		tag = UKR
		tag = DKB
		tag = WHR
		tag = LIT
		tag = LAT
		tag = EST
		tag = BAT
		tag = FIN
	}
	restrict_territorial_ambitions_PREV = no
	var:global.eval_state = {
		OR = {
			is_siberia = yes
			is_russian_far_east = yes
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		OR = {
			tag = TRM
			tag = JAP
			tag = MON
			tag = FNG
			tag = QIE
			tag = XSM
			tag = CHI
		}
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
	}
}

rule_RUS_stay_out_of_west_europe_ROOT = {
	OR = {
		tag = RUS
		tag = SOV
	}
	var:global.eval_state = {
		OR = {
			region = 5 #Lowlands
			is_european_france = yes
		}
	}
	NOT = {
		781 = {
			OR = {
				is_owned_by_ROOT_or_ally = yes
				has_claimed_state_in_peace_conference = ROOT
			}
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		is_willing_to_take_state_PREV = yes
	}
}

rule_RUS_stay_out_of_west_europe_PREV = {
	OR = {
		tag = RUS
		tag = SOV
	}
	var:global.eval_state = {
		OR = {
			region = 5 #Lowlands
			is_european_france = yes
		}
	}
	NOT = {
		781 = {
			OR = {
				is_owned_by = PREV
				owner = { is_ally_with = PREV.PREV }
				has_claimed_state_in_peace_conference = PREV
			}
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		#is_willing_to_take_state_PREV = yes
	}
}

rule_RUS_stay_out_of_spain_ROOT = {
	OR = {
		tag = RUS
		tag = SOV
	}
	var:global.eval_state = {
		OR = {
			region = 41 #Eastern Iberia
			region = 236 #Southern Iberia
			region = 237 #Western Iberia
		}
		is_important_state = no
	}
	NOT = {
		16 = {
			OR = {
				is_owned_by_ROOT_or_ally = yes
				has_claimed_state_in_peace_conference = ROOT
			}
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		is_willing_to_take_state_PREV = yes
	}
}

rule_RUS_stay_out_of_spain_PREV = {
	OR = {
		tag = RUS
		tag = SOV
	}
	var:global.eval_state = {
		OR = {
			region = 41 #Eastern Iberia
			region = 236 #Southern Iberia
			region = 237 #Western Iberia
		}
		is_important_state = no
	}
	NOT = {
		16 = {
			OR = {
				is_owned_by = PREV
				owner = { is_ally_with = PREV.PREV }
				has_claimed_state_in_peace_conference = PREV
			}
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		#is_willing_to_take_state_PREV = yes
	}
}

rule_RUS_stay_out_of_italy_ROOT = {
	OR = {
		tag = RUS
		tag = SOV
	}
	var:global.eval_state = {
		OR = {
			region = 23 #Italy
			region = 131 #Switzerland
			region = 169 #Tyrhennian Sea
			region = 181 #Po Valley
		}
	}
	NOT = {
		4 = {
			OR = {
				is_owned_by_ROOT_or_ally = yes
				has_claimed_state_in_peace_conference = ROOT
			}
		}
		109 = {
			OR = {
				is_owned_by_ROOT_or_ally = yes
				has_claimed_state_in_peace_conference = ROOT
			}
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		is_willing_to_take_state_PREV = yes
	}
}

rule_RUS_stay_out_of_italy_PREV = {
	OR = {
		tag = RUS
		tag = SOV
	}
	var:global.eval_state = {
		OR = {
			region = 23 #Italy
			region = 131 #Switzerland
			region = 169 #Tyrhennian Sea
			region = 181 #Po Valley
		}
	}
	NOT = {
		4 = {
			OR = {
				is_owned_by = PREV
				owner = { is_ally_with = PREV.PREV }
				has_claimed_state_in_peace_conference = PREV
			}
		}
		109 = {
			OR = {
				is_owned_by = PREV
				owner = { is_ally_with = PREV.PREV }
				has_claimed_state_in_peace_conference = PREV
			}
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		#is_willing_to_take_state_PREV = yes
	}
}

rule_RUS_stay_out_of_ireland_ROOT = {
	OR = {
		tag = RUS
		tag = SOV
	}
	var:global.eval_state = {
		region = 4 #Ireland
	}
	NOT = {
		126 = {
			OR = {
				is_owned_by_ROOT_or_ally = yes
				has_claimed_state_in_peace_conference = ROOT
			}
		}
		121 = {
			OR = {
				is_owned_by_ROOT_or_ally = yes
				has_claimed_state_in_peace_conference = ROOT
			}
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		is_willing_to_take_state_PREV = yes
	}
}

rule_RUS_stay_out_of_ireland_PREV = {
	OR = {
		tag = RUS
		tag = SOV
	}
	var:global.eval_state = {
		region = 4 #Ireland
	}
	NOT = {
		126 = {
			OR = {
				is_owned_by = PREV
				owner = { is_ally_with = PREV.PREV }
				has_claimed_state_in_peace_conference = PREV
			}
		}
		121 = {
			OR = {
				is_owned_by = PREV
				owner = { is_ally_with = PREV.PREV }
				has_claimed_state_in_peace_conference = PREV
			}
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		at_conference_has_war_with_owner = yes
		OR = {
			restrict_territorial_ambitions_PREV = no
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		}
		#is_willing_to_take_state_PREV = yes
	}
}

rule_RUS_stay_out_of_SE_asia_ROOT = {
	OR = {
		tag = RUS
		tag = SOV
	}
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_ROOT = no
		is_southeast_asia = yes
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		is_in_asia = yes
		NOT = { has_war_with = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
			restrict_territorial_ambitions_PREV = no
		}
		is_willing_to_take_state_PREV = yes
	}
}

rule_RUS_stay_out_of_SE_asia_PREV = {
	OR = {
		tag = RUS
		tag = SOV
	}
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_PREV = no
		is_southeast_asia = yes
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		is_in_asia = yes
		NOT = { has_war_with = PREV }
		at_conference_has_war_with_owner = yes
		OR = {
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
			restrict_territorial_ambitions_PREV = no
		}
		#is_willing_to_take_state_PREV = yes
	}
}

rule_TRM_border_only_ROOT = {
	tag = TRM
	SOV = {
		at_conference_has_war_with_owner = yes
		at_conference_has_war_with_ROOT = no
	}
	var:global.eval_state = {
		is_owned_by = RUS
		NOT = {
			any_neighbor_state = { is_owned_or_claimed_by_ROOT = yes }
			OR = {
				is_siberia = yes
				is_russian_far_east = yes
			}
		}
	}
}

rule_TRM_border_only_PREV = {
	tag = TRM
	SOV = {
		at_conference_has_war_with_owner = yes
		at_conference_has_war_with_PREV = no
	}
	var:global.eval_state = {
		is_owned_by = RUS
		NOT = {
			is_siberia = yes
			is_russian_far_east = yes
			any_neighbor_state = {
				OR = {
					has_claimed_state_in_peace_conference = TRM
					is_owned_by = TRM
				}
			}
		}
	}
}

rule_JAP_leave_russian_coast_to_TRM_ROOT = {
	tag = JAP
	var:global.eval_state = {
		OR = {
			state = 408 #Vladivostok
			state = 409 #Khabarovsk
			state = 560 #Nikolayevsk
			state = 562 #Okhotsk
			state = 637 #Kamchatka
		}
	}
	TRM = {
		OR = {
			is_subject_of = JAP
			is_in_faction_with = JAP
		}
		at_conference_has_war_with_owner = yes
		var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
	}
}

rule_JAP_leave_russian_coast_to_TRM_PREV = {
	tag = JAP
	var:global.eval_state = {
		OR = {
			state = 408 #Vladivostok
			state = 409 #Khabarovsk
			state = 560 #Nikolayevsk
			state = 562 #Okhotsk
			state = 637 #Kamchatka
		}
	}
	TRM = {
		OR = {
			is_subject_of = JAP
			is_in_faction_with = JAP
		}
		at_conference_has_war_with_owner = yes
		var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
	}
}

rule_AUS_stay_out_of_northern_germany_ROOT = {
	tag = AUS
	restrict_territorial_ambitions_ROOT = no
	var:global.eval_state = {
		OR = {
			region = 6 #Rhineland
			region = 8 #Lower Germany
			region = 33 #Denmark
			state = 8 #Luxembourg
			state = 28 #Alsace
			state = 60 #Thuringia
			state = 65 #Saxony
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		NOT = { tag = RUS }
		NOT = { tag = SOV }
		at_conference_has_war_with_owner = yes
		is_willing_to_take_state_PREV = yes
	}
}

rule_AUS_stay_out_of_northern_germany_PREV = {
	tag = AUS
	restrict_territorial_ambitions_PREV = no
	var:global.eval_state = {
		OR = {
			region = 6 #Rhineland
			region = 8 #Lower Germany
			region = 33 #Denmark
			state = 8 #Luxembourg
			state = 28 #Alsace
			state = 60 #Thuringia
			state = 65 #Saxony
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		NOT = { tag = RUS }
		NOT = { tag = SOV }
		at_conference_has_war_with_owner = yes
		#is_willing_to_take_state_PREV = yes
	}
}

rule_AUS_stay_out_of_eastern_germany_ROOT = {
	tag = AUS
	NOT = {
		POL = { is_ally_with = ROOT }
		10 = { is_owned_or_claimed_by_ROOT = yes } #Warsaw
	}
	var:global.eval_state = {
		OR = {
			state = 5 #East Prussia
			state = 67 #Upper Silesia
			state = 86 #Posen
			state = 188 #Memel
			state = 776 #West Prussia
			state = 777 #Masuria
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		NOT = { tag = RUS }
		NOT = { tag = SOV }
		at_conference_has_war_with_owner = yes
		is_willing_to_take_state_PREV = yes
	}
}

rule_AUS_stay_out_of_eastern_germany_PREV = {
	tag = AUS
	NOT = {
		POL = { is_ally_with = PREV }
		10 = { is_owned_or_claimed_by_PREV = yes } #Warsaw
	}
	var:global.eval_state = {
		OR = {
			state = 5 #East Prussia
			state = 67 #Upper Silesia
			state = 86 #Posen
			state = 188 #Memel
			state = 776 #West Prussia
			state = 777 #Masuria
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		NOT = { tag = RUS }
		NOT = { tag = SOV }
		at_conference_has_war_with_owner = yes
		#is_willing_to_take_state_PREV = yes
	}
}

rule_stay_out_of_eastern_germany_ROOT = {
	NOT = {
		tag = RUS
		tag = SOV
		AND = {
			tag = AUS
			OR = {
				POL = { is_subject_of = ROOT }
				10 = { is_owned_or_claimed_by_ROOT = yes } #Warsaw
			}
		}
	}
	var:global.eval_state = {
		OR = {
			state = 5 #East Prussia
			state = 63 #Farther Pomerania
			state = 66 #Lower Silesia
			state = 67 #Upper Silesia
			state = 68 #Neumark
			state = 86 #Posen
			state = 188 #Memel
			state = 776 #West Prussia
			state = 777 #Masuria
		}
		is_claim_or_core_of_ROOT = no
	}
	OR = {
		RUS = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_ROOT = yes
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
			is_willing_to_take_state_PREV = yes
		}
		SOV = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_ROOT = yes
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
			is_willing_to_take_state_PREV = yes
		}
	}
}

rule_stay_out_of_eastern_germany_PREV = {
	NOT = {
		tag = RUS
		tag = SOV
		AND = {
			tag = AUS
			OR = {
				POL = { is_subject_of = PREV }
				10 = { is_owned_or_claimed_by_PREV = yes } #Warsaw
			}
		}
	}
	var:global.eval_state = {
		OR = {
			state = 5 #East Prussia
			state = 63 #Farther Pomerania
			state = 66 #Lower Silesia
			state = 67 #Upper Silesia
			state = 68 #Neumark
			state = 86 #Posen
			state = 188 #Memel
			state = 776 #West Prussia
			state = 777 #Masuria
		}
		is_claim_or_core_of_PREV = no
	}
	OR = {
		RUS = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_PREV = yes
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
			#is_willing_to_take_state_PREV = yes
		}
		SOV = {
			at_conference_has_war_with_owner = yes
			at_conference_no_war_with_PREV = yes
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
			#is_willing_to_take_state_PREV = yes
		}
	}
}

rule_stay_out_of_southern_germany_ROOT = {
	NOT = { tag = AUS }
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_ROOT = no
		OR = {
			state = 780 #Baden
			state = 50 #Wurttemberg
			state = 52 #Oberbayern
			state = 53 #Niederbayern
		}
	}
	AUS = {
		at_conference_has_war_with_owner = yes
		at_conference_no_war_with_ROOT = yes
		restrict_territorial_ambitions_PREV = no
		is_willing_to_take_state_PREV = yes
	}
}

rule_stay_out_of_southern_germany_PREV = {
	NOT = { tag = AUS }
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_PREV = no
		OR = {
			state = 780 #Baden
			state = 50 #Wurttemberg
			state = 52 #Oberbayern
			state = 53 #Niederbayern
		}
	}
	AUS = {
		at_conference_has_war_with_owner = yes
		at_conference_no_war_with_PREV = yes
		restrict_territorial_ambitions_PREV = no
		#is_willing_to_take_state_PREV = yes
	}
}

rule_TUR_stay_out_of_northern_europe_ROOT = {
	tag = TUR
	restrict_territorial_ambitions_ROOT = no
	var:global.eval_state = {
		is_on_continent = europe
		is_claim_or_core_or_ambition_of_ROOT = no
		NOT = {
			region = 15 #Romania
			region = 24 #Southern Balkans
			region = 25 #Greece
			region = 26 #Bulgaria
			region = 27 #Hungary
			region = 134 #Caucasus
			region = 143 #Northern Balkans
			region = 144 #Transylvania
			region = 145 #Slovakia
			region = 223 #Aegean Sea
			state = 115 #Sicily
			state = 116 #Malta
			state = 137 #Crimea
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
			restrict_territorial_ambitions_PREV = no
		}
		is_willing_to_take_state_PREV = yes
	}
}

rule_TUR_stay_out_of_northern_europe_PREV = {
	tag = TUR
	restrict_territorial_ambitions_PREV = no
	var:global.eval_state = {
		is_on_continent = europe
		is_claim_or_core_or_ambition_of_PREV = no
		NOT = {
			region = 15 #Romania
			region = 24 #Southern Balkans
			region = 25 #Greece
			region = 26 #Bulgaria
			region = 27 #Hungary
			region = 134 #Caucasus
			region = 143 #Northern Balkans
			region = 144 #Transylvania
			region = 145 #Slovakia
			region = 223 #Aegean Sea
			state = 115 #Sicily
			state = 116 #Malta
			state = 137 #Crimea
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		at_conference_has_war_with_owner = yes
		OR = {
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
			restrict_territorial_ambitions_PREV = no
		}
		#is_willing_to_take_state_PREV = yes
	}
}

rule_leave_italy_to_italy_ROOT = {
	NOT = {
		is_italian_tag = yes
	}
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_ROOT = no
		is_european_italy = yes
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		is_italian_tag = yes
		NOT = { has_war_with = ROOT }
		at_conference_has_war_with_owner = yes
		var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		is_willing_to_take_state_PREV = yes
	}
}

rule_leave_italy_to_italy_PREV = {
	NOT = {
		is_italian_tag = yes
	}
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_PREV = no
		is_european_italy = yes
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		is_italian_tag = yes
		NOT = { has_war_with = PREV }
		at_conference_has_war_with_owner = yes
		var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
	}
}

rule_leave_india_to_india_ROOT = {
	NOT = {
		is_indian_tag = yes
	}
	var:global.eval_state = {
		is_claim_or_core_of_ROOT = no
		is_india = yes
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		is_indian_tag = yes
		NOT = { has_war_with = ROOT }
		at_conference_has_war_with_owner = yes
		var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
		is_willing_to_take_state_PREV = yes
	}
}

rule_leave_india_to_india_PREV = {
	NOT = {
		is_indian_tag = yes
	}
	var:global.eval_state = {
		is_claim_or_core_of_PREV = no
		is_india = yes
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		is_indian_tag = yes
		NOT = { has_war_with = PREV }
		at_conference_has_war_with_owner = yes
		var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
	}
}

rule_leave_america_to_americans_ROOT = {
	is_american_tag = no
	OR = {
		NOT = { has_global_flag = USA_civil_war_begun_flag }
		has_global_flag = USA_civil_war_over_flag
	}
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_ROOT = no
		OR = {
			is_on_continent = north_america
			is_on_continent = central_america
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		is_american_tag = yes
		NOT = { has_war_with = ROOT }
		at_conference_has_war_with_owner = yes
		restrict_territorial_ambitions_PREV = no
		is_willing_to_take_state_PREV = yes
	}
}

rule_leave_america_to_americans_PREV = {
	is_american_tag = no
	OR = {
		NOT = { has_global_flag = USA_civil_war_begun_flag }
		has_global_flag = USA_civil_war_over_flag
	}
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_PREV = no
		OR = {
			is_on_continent = north_america
			is_on_continent = central_america
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = PREV }
		is_american_tag = yes
		NOT = { has_war_with = PREV }
		at_conference_has_war_with_owner = yes
		restrict_territorial_ambitions_PREV = no
		#is_willing_to_take_state_PREV = yes
	}
}

rule_3I_stay_out_of_asia_ROOT = {
	OR = {
		tag = INT
		is_in_faction_with = INT
	}
	has_socialist_government = yes
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_ROOT = no
		OR = {
			is_mainland_china = yes
			is_southeast_asia = yes
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		is_in_asia = yes
		NOT = { has_war_with = ROOT }
		at_conference_has_war_with_owner = yes
		OR = {
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
			restrict_territorial_ambitions_PREV = no
		}
		is_willing_to_take_state_PREV = yes
	}
}

rule_3I_stay_out_of_asia_PREV = {
	OR = {
		tag = INT
		is_in_faction_with = INT
	}
	has_socialist_government = yes
	var:global.eval_state = {
		is_claim_or_core_or_ambition_of_PREV = no
		OR = {
			is_mainland_china = yes
			is_southeast_asia = yes
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		is_in_asia = yes
		NOT = { has_war_with = PREV }
		at_conference_has_war_with_owner = yes
		OR = {
			var:global.eval_state = { is_claim_or_core_or_ambition_of_PREV = yes }
			restrict_territorial_ambitions_PREV = no
		}
		#is_willing_to_take_state_PREV = yes
	}
}

rule_Cernauti_neighbor_ROOT = {
	var:global.eval_state = {
		state = 80 #Cernauti
	}
	NOT = {
		89 = { is_owned_or_claimed_by_ROOT = yes } #Stanislawow
		713 = { is_owned_or_claimed_by_ROOT = yes } #Suceava
	}
}

rule_Cernauti_neighbor_PREV = {
	var:global.eval_state = {
		state = 80 #Cernauti
	}
	NOT = {
		89 = { is_owned_or_claimed_by_PREV = yes } #Stanislawow
		713 = { is_owned_or_claimed_by_PREV = yes } #Suceava
	}
}

rule_no_Jutland_without_Sjaelland_ROOT = {
	var:global.eval_state = {
		state = 99 #Jutland
	}
	NOT = {
		37 = { is_owned_or_claimed_by_ROOT = yes }
	}
}

rule_no_Jutland_without_Sjaelland_PREV = {
	var:global.eval_state = {
		state = 99 #Jutland
	}
	NOT = {
		37 = { is_owned_or_claimed_by_PREV = yes }
	}
}

rule_leave_INS_to_DEI_ROOT = {
	NOT = { tag = DEI }
	var:global.eval_state = {
		is_claim_or_core_of_ROOT = no
		is_core_of = DEI
	}
	DEI = {
		OR = {
			is_subject_of = ROOT
			is_in_faction_with = ROOT
		}
		at_conference_has_war_with_owner = yes
	}
}

rule_leave_INS_to_DEI_PREV = {
	NOT = { tag = DEI }
	var:global.eval_state = {
		is_claim_or_core_of_ROOT = no
		is_core_of = DEI
	}
	DEI = {
		OR = {
			is_subject_of = PREV
			is_in_faction_with = PREV
		}
		at_conference_has_war_with_owner = yes
	}
}

rule_AUS_split_hungary_with_belgrade_pact_ROOT = {
	tag = AUS
	var:global.eval_state = {
		is_claim_or_core_of_ROOT = no
		OR = {
			region = 144 #Transylvania
			state = 45 #Vojvodina
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		is_in_belgrade_pact = yes
		NOT = { has_war_with = ROOT }
		at_conference_has_war_with_owner = yes
	}
}

rule_AUS_split_hungary_with_belgrade_pact_PREV = {
	tag = AUS
	var:global.eval_state = {
		is_claim_or_core_of_ROOT = no
		OR = {
			region = 144 #Transylvania
			state = 45 #Vojvodina
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = { tag = ROOT }
		OR = {
			tag = SER
			tag = ROM
		}
		NOT = { has_war_with = PREV }
		at_conference_has_war_with_owner = yes
	}
}

rule_belgrade_pact_split_hungary_with_austria_ROOT = {
	OR = {
		tag = SER
		tag = ROM
	}
	var:global.eval_state = {
		is_claim_or_core_of_ROOT = no
		NOT = {
			region = 144 #Transylvania
			state = 45 #Vojvodina
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = {
			tag = ROOT
			has_war_with = ROOT
		}
		AUS = { is_ally_with = PREV }
		at_conference_has_war_with_owner = yes
	}
}

rule_belgrade_pact_split_hungary_with_austria_PREV = {
	OR = {
		tag = SER
		tag = ROM
	}
	var:global.eval_state = {
		is_claim_or_core_of_ROOT = no
		NOT = {
			region = 144 #Transylvania
			state = 45 #Vojvodina
		}
	}
	any_of_scopes = {
		array = global.conference
		NOT = {
			tag = ROOT
			has_war_with = PREV
		}
		AUS = { is_ally_with = PREV }
		at_conference_has_war_with_owner = yes
	}
}

